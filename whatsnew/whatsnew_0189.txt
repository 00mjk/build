0.189
-----


MAMETesters Bugs Fixed
----------------------


New working machines
--------------------


New working clones
------------------


Machines promoted to working
----------------------------


Clones promoted to working
--------------------------


New machines marked as NOT_WORKING
----------------------------------


New clones marked as NOT_WORKING
--------------------------------


New working software list additions
-----------------------------------


New NOT_WORKING software list additions
---------------------------------------


Translations added or modified
------------------------------


Source Changes
--------------
-gb.cpp: optimize the channel update methods. [057a3dd61f99517a3afea0051a49cb27994f94d]
 * I recently noticed that it takes very long to load a gba state, sometimes dozens of seconds, and the older the state is, the
    longer it takes to load.
 * I found out it's caused by gameboy_sound_device does not save the m_last_updated variable, and after loading a state, in the
    update_state method, now could end up being much larger than m_last_updated, and leads to substantial yet wasted calculation of
    the channel state.
 * Simply adding save_item(NAME(m_last_updated)) should fix the problem, however, since it will break current existing saved states,
    and optimize the channel update methods is in the TODO list, I took the latter choice, now the calculation to update the channel
    state is really negligible and the state loading is almost instantaneous.

-gb.cpp: save m_last_updated and m_snd_control.cycles [057a3dd61f99517a3afea0051a49cb27994f94d]
 * These two variables are added later but not saved, however, since they are used in the update_state method to control how many
    cycles to feed to the channel update methods, they should be saved to ensure correct emulation.

-Road Runner (Midway): replaced bad rom with good one, added notes [Credits to be determined]

-Cleanup/bulletproofing to the issue Wizz just found [Nathan Woods]

-Fixed missing Torpedo trail [MASH]
 * Fixed missing Torpedo trail in Wolf Pack. It was a type made by Osso in MAME 0.185:
 * https://git.redump.net/mame/commit/?id=f9b6c26bcaefd9de27867e76df00eceedaac8da0

-luaengine: debugger_manager support [Carl]

-Imgtool:  Changed a pointer to a reference, and fixed a std::string(nullptr) bug [Nathan Woods]

-Imgtool: Proper cleanup of floppy object after create/open failure [Nathan Woods]

-plugins/cheat: catch errors in cheat scripts and prelim break/watch support [Carl]

-New 74LS259/9334/CD4099 devices [AJR]
 * These humble 16-pin logic devices were commonly used in 8-bit arcade games to control coin counters/lockouts, IRQ flipflops,
    graphics banking, slave CPU reset lines, discrete audio triggers, screen flipping, serial EEPROMs and much else. Over 100
    drivers and a few bus devices have been updated to use the new implementation, and a great deal of research has gone into
    documenting the physical location of these devices on actual PCBs in the source. Write handlers have been provided for both
    orthodox and somewhat less conventional memory mappings.
 * Incidental to this update, coin counters and/or lockouts have been added to Atari System 1 games, Basketball, Gauntlet, Gyruss,
    Hana Yayoi, Hole Land, Jr. Pac-Man, Mahjong Sisters, Pooyan, Roc'n Rope, Squash, Thunder Hoop, Time Limit, Time Pilot '84 and
    many others. This also cleans up coin counter behavior in Sauro and Rally Bike.

-segae.cpp: Corrected rom names for Transformers System E. [Fabrice Arzeno]

-changed set names for 'grtesoro' sets to 'play2000' to more accurately represent the name of the game gave it it's own machine
 structure and memory map instead of borrowing Maniac Square one added some workarounds so that it actually boots, it might not be
 heavily protected compared to the Gaeclo titles and there doesn't seem much chance of us finding a working one. fixed GFX rom
 loading for the game based on above work. [David Haywood]

-namcos2.cpp: Ordyne uses older IO MCU ROM, clean ROM labels as per PCB photos [MetalliC]

-ms0515: add sound, change clock rate to real one [Sergey Svishchev]

-ym2151: Emulate reset line [AJR]

-Move unemulated/imperfect flags from machines into devices. [Vas Crabb]
 * Right now, flags for unemulated/imperfect features apply at system level.  This falls over quickly with systems that have slot
    devices. For example you can plug in a broken sound card or keyboard on a PC or Amiga driver and get no warnings.  There's also
    no way to propagate these flags from a device to all systems using it.
 * This changeset addresses these issues.  It's now possible to report unemulated/imperfect features on a device level with static
    unemulated_feeatures() and imperfect_features() member functions.  So far the only thing using this is the votrax device.
 * To support front-ends, this is exposed in -listxml output as a new "feature" element that can appear in system/device
    descriptions.  It has a "type" attribute indicating which feature it is, potentially a "status" attribute if the device itself
    declares that the feature is unemulated/imperfect, and potentially an "overall" attribute if the device inherits a more severe
    indication from a subdevice.  The embedded DTD describes possible values.
 * Example: device/machine declares imperfect sound: <feature type="sound" status="imperfect"/>
 * Example: device/machine declares unemulated keyboard: <feature type="keyboard" status="unemulated"/>
 * Example: device declares imperfect controls but inherits unemulated controls from a subdevice: <feature type="controls"
    status="imperfect" overall="unemulated"/>
 * Example: device doesn't declare imperfect LAN but inherits it from a subdevice: <feature type="lan" overall="imperfect"/>
 * It's still possible to add these flags to machines in the GAME/COMP/CONS macro.  If the state class declares them with static
    member functions, the two sources will be combined.
 * If you subclass a device, you inherit its flags if you don't redefine the relevant static member functions (no override qualifier
    is necessary since they're static).
 * The UI has been updated to display appropriate warnings for the overall machine configuration, including selected slot devices,
    at launch time. The menus don't display overall status, only status for the machine itself.  We can make it scan subdevices if
    we decide that's desirable, it just needs caching to enure we don't take a huge performance hit.

-plugins/gdbstub: WIP gdbstub plugins [Carl]

-don't use hairline spaces for alingment in the info box [Vas Crabb]

-Fixed the build. Note: I changed the code back to what it was, but perhaps (!state && ..) might be preferable. [Robbbert]

-Trade MACHINE_IMPERFECT_KEYBOARD, MACHINE_NODEVICE_CAMERA and MACHINE_NODEVICE_WAN for MACHINE_IMPERFECT_CONTROLS. [Vas Crabb]
 * MACHINE_IMPERFECT_KEYBOARD is more applicable on keyboard devices - most of them should be devicified eventually.
 * MACHINE_NODEVICE_CAMERA tends to apply across a family of machines, so it's easy to apply at state class level.
 * MACHINE_NODEVICE_WAN isn't even used.
 * MACHINE_IMPERFECT_CONTROLS is widely applicable, knock yourselves out adding it to GAME macros.
 * Updated machines that were using MACHINE_IMPERFECT_KEYBOARD or MACHINE_NODEVICE_CAMERA to apply it at device or state class
    level.

-multipcm: confirmed as Yamaha YMW-258-F.  [any, R. Belmont]

-spcforce: Add coin counters, start lamps and addressable latch device [AJR]

-Update localisation .po files.  Our localisations are rotting badly, so please update what you can for recent UI changes.
 [Vas Crabb]
 * Note that to run make translation you need to patch GNU gettext to support C++14 digit grouping. See the attached patch here:
    https://savannah.gnu.org/bugs/?50117

-Show presence of analog controls and/or keyboard in info box - it's potentially useful when considering whether a system iwll be
 usable, or will put you in full keyboard mode [Vas Crabb]

-reduce weight of render.h by moving component specialisation declarations into rendlay.cpp [Vas Crabb]

-tankbatt: Improved handling of sample triggers (fire sound is no longer doubled) [AJR]

-Atomiswave security notes [brizzo, MetalliC]

-decocass.cpp: Major improvements to colors and graphics layer priorities [AJR]
 * Implement the PRI2 pen modification effect. This makes the tunnels and headlight in Highway Chase look much more accurate, and
    makes some color changes work in Astro Fantasia.
 * Shadow color in Skater is now properly black (not a pen modification effect).
 * Correct background fill color, making high score screen in Super Doubles Tennis properly blue.

-Add support for layout item groups, replace simple_list with more appropriate containers, remove misleading const qualifiers,
 reduce repeated XML walking. [Vas Crabb]

-Translations updated [Vas Crabb]
 * ------------------- Chinese (simplified) [YuiFAN] Chinese (traditional) [YuiFAN]

-Add N-dimensional output finder to avoid runtime string hashes - intlc440 in RUN mode goes from 800% to 2000% unthrottled on 2010
 i7 notebook [Vas Crabb]

-get rid of string hashes when fetching output values in layout rendering, too [Vas Crabb]

-gt64xxx: Buffer multiple writes for PCI stall.  Fixes MT 06636 (calspeed). [Ted Green]

-Imgtool:  Merged normalize_filename() into cannonicalize_path(), C++-ification (#2527) [npwoods]

-new working clone - B.Rap Boys Special (World) [briantro]

-Imgtool:  Eliminated Imgtool-specific rand() function [Nathan Woods]

-seattle: Set proper blitz99 dip settings and add gearshift to calspeed. Fixes MT 00975 (calspeed). [Ted Green]

-Rainbow-100: use Z80SIO instead of Z80DART; make UCSD Pascal boot again (#2524) [Bavarese]
 * Incorporates change from Z80DART to Z80SIO proposed by Edstrom. Also make UCSD Pascal boot again.

-Update strings.po (#2526) [Ashura-X]
 * Translations updated
 * ------------------- Portuguese (Brazil)

-mario: Add coin counters and 74LS259 [AJR]

-isbc8630: Add 74LS259 "status register" (only partly implemented) [AJR]

-plugins/data: add marp scores [Carl]

-MT #06259 [angelosa]

-add  HD647180X MCU dumps to Whoopee and Ghox, allowing for sound emulation in both of them. This also fixes the high score table
 background in Ghox, which was also MCU related [Team Caps0ff]

-blazeon, wingforc: Shadowing RAM with ROM in sound CPU map can't be right [AJR]

-v25: Make IDB register state visible to debugger [AJR]

-Add "minimaws" sample script demonstrating how to do some tasks with output from -listxml verb.  Compatible with Python 2.7 or
 Python 3. Requires at least SQLite 3.6.19 for foreign key support. [Vas Crabb]
 * This serves a few purposes:
 * Demonstrating some things that can be done with -listxml output
 * Providing a reference implementation for useful queries
 * Helping ensure our XML output isn't completely useless
 * Providing additional queries over MAME's auxiliary verbs
 * Proper glob support unlike the broken implementation in MAME right now
 * Right now, it's a bit ugly to use.  You can only load into a completely clean database, and you need to manually create the
    schema.  I'll address this later.  The default database filename is minimaws.sqlite3 (you can override this with --database
    before the verb on the command line).  Loading isn't particularly fast, but query performance is very good.
 * Create a database first: rm -f minimaws.sqlite3 sqlite3 minimaws.sqlite3 < scripts/minimaws/schema.sql
 * Now you can load it using a MAME binary or XML output (use one of these options, not both): python scripts/minimaws/minimaws.py
    load --executable ./mame python scripts/minimaws/minimaws.py load --file mame0188.xml
 * Once that's done you can do queries: python scripts/minimaws/minimaws.py listfull python scripts/minimaws/minimaws.py listclones
    "*cmast*" python scripts/minimaws/minimaws.py listsource "*mous*" python scripts/minimaws/minimaws.py listbrothers "intl*"
 * These work much like the equivalent MAME verbs, but without the overhead of loading MAME's static data.  But there's one already
    query that you can't easily do with MAME: python scripts/minimaws/minimaws.py listaffected "src/devices/cpu/m6805/*"
    src/devices/sound/qsound.cpp
 * This will list all runnable systems that use a device defined in any file under devices/cpu/m6805 or in devices/sound/qsound.cpp
    (you can specify and arbitrary number of files or glob patterns).  This may be useful for planning regression tests.
 * Another thing this does (that gives rise to the name) is serving information over HTTP.  It's implemented as a WSGI, and it
    mainly uses GET requests.  This means it can run hosted in Apache mod_wsgi, or cached by Apache mod_proxy, Squid, nginx, or
    something else.  It can also run out-of-the-box using wsgiref.simple_server components.  The default port is 8080 but this can
    be changed with the --port option.
 * Start the web server with the serve verb (stop it with keyboard interrupt ^C or similar): python scripts/minimaws/minimaws.py
    serve
 * Right now it's rather crude, and doesn't list devices for you.  This means you have to know the shortname of a machine to get a
    useful URL.
 * For example, you can look at a driver and see its parent set and the devices it references:
    http://localhost:8080/machine/kof2000n
 * Or you can look at a device, and see the devices it refereces, as well as the devices/systems that reference it:
    http://localhost:8080/machine/zac1b11142
 * The links between devices/systems are clickable.  They might 404 on you if you used a single-driver build with broken
    parent/clone relationships, but they should all work in a full build that passes validation.
 * There's still a lot to do.  In particular I want to demonstrate how to do live DIP switch preview and dynamic slot discovery.
    But I've already discovered stuff in the -listxml output that's less than ideal with this, so it's helping.

-Translation Update [BraiNKilleRGR]

-Partially fix MT #04528 [angelosa]

-Changes to debugger memory address translation [AJR]
 * memory_translate now returns an address space number rather a boolean flag, permitting addresses in part of one space to map to
    an entirely different space. This is primarily intended to help MCUs which have blocks of internal memory that can be
    dynamically remapped, but may also allow for more accurate emulation of MMUs that drive multiple external address spaces, since
    the old limit of four address spaces per MAME device has been lifted.
 * memory_translate has also been made a const method, in spite of a couple of badly behaved CPU cores that can't honestly treat it
    as one.
 * The (read|write)_(byte|word|dword|qword|memory|opcode) accessors have been transferred from debugger_cpu to
    device_memory_interface, with somewhat modified arguments corresponding to the translate function it calls through to if
    requested.

-SAM6883: Fixed a bug by which VDG addressing incorrectly honored the page bit [Nathan Woods]
 * This affected the CoCo/Dragon family of drivers
 * Special thanks to Ciaran Anscomb for identifying this problem

-This is too contentious, please put it up for review [Vas Crabb]
 * Revert "Changes to debugger memory address translation"
 * This reverts commit bb0964f9a284b15851773f5428bd602ca01cc28b.

-snes.xml: fixed rom name and also added extra information for Dragon Ball Z - Super Gokuu Den - Kakusei Hen. [Iñigo Martínez]

-snes.xml: added information about an earlier Euro Ranma ½ revision. [Iñigo Martínez]

-snes.xml: added information about an earlier spanish release of Donkey Kong Country 2 - Diddy's Kong Quest. [Iñigo Martínez]

-snes.xml: added information about the spanish release of Pilotwings to the Euro dump. [Iñigo Martínez]

-nes.xml: added information about Super Mario Bros. PCB. [Iñigo Martínez]

-nes.xml: fixed serial value and added information about Pinball PCB. [Iñigo Martínez]

-nes.xml: fixed serial value and added information about Super Mario Bros. 2 PCB. [Iñigo Martínez]

-nes.xml: fixed serial value and added information about Trog! PCB. [Iñigo Martínez]

-minimaws web mode enhancements: [Vas Crabb]
 * Support serving static assets, use for stylesheet, script and images
 * Better error pages, reject unsupported HTTP methods
 * Replace lists with sortable tables with more detail (click headings to sort)
 * Add pages for exploring source files, link from machine pages
   - Can start from full source file list at http://localhost:8080/sourcefile/

-[Imgtool] C++-ification of imgtool_forkent structure [Nathan Woods]

-fix -sleep [Vas Crabb]

-jp.cpp: Add 74LS259 latches and ADPCM sound system used by some games [AJR]

-fix up input_merger - it needs to save, and it's passive so no reset [Vas Crabb]

-Load slot info in minimaws (not exposed yet), fix up some problems with slots uncovered [Vas Crabb]

-Imgtool:  Fixed features.supports_geticoninfo [Nathan Woods]

-Imgtool:  Classic Mac:  Made the logic for B&W icon able to handled non-masked set pixels [Nathan Woods]

-a590: Correct filenames, add undumped 4.6 and 5.92 versions. [Dirk Best]

-Coco FDC: Fix MT06640 (possibly also MT06639) [Dirk Best]

-misc housekeeping / one-liners [David Haywood]
 * removed am already dumped game from the undumped list in balsente.cpp
 * change copy+pasted comment in hangzo to better reflect that the tiles are not encrypted
 * fixed typo in ghox memory map

-MT #06641 [angelosa]

-jvc_dsk: Autodetect double sided floppy images without header, fixes #2405 [Dirk Best]

-minimaws: add machine feature status flags and slot card selection with live update [Vas Crabb]

-jvc_dsk: Improve support for headerless OS-9 images [Dirk Best]

-new working software list addition [briantro]

-minimaws: show compatible slots for devices [Vas Crabb]

-Fix -slot card,bios=rev (selected BIOS was being applied to slot itself, not card) [Vas Crabb]

-New driver: Kontron PSI98 [Dirk Best]
 * Basic system is done and it can boot from floppy, but there are still many things to add, therefore marked as NOT_WORKING for
    now.

-minimaws: demonstrate slot card BIOS selection, requires exposing device BIOS sets in XML output [Vas Crabb]

-minimaws: remove need for explicit schema step [Vas Crabb]

-minimaws: expose system BIOS, better way of dropping tables [Vas Crabb]

-minimaws: add buttons for restoring default BIOS/slot card, clean up and comment the JavaScript a bit more [Vas Crabb]

-Better documentation for midvunit wheel board (#2546) [Risugami]
 * Better documentation for midvunit wheel board
 * Added part numbers

-Use proper font metrics on OSX rather than trying to guess advance from glyph box [Vas Crabb]
 * Update most of Japanese translation

-Update spanish strings. [aviloria]
 * Translations updated
 * ------------------- Spanish [A. Viloria]

-fix MT 06644 [David Haywood]

-Added a very preliminary PC9801 AMD98 sound board emulation [Angelo Salese]

-font_osx: handle fonts where space glyphs return a null bounding box (e.g. Hiragino family) [Vas Crabb]
 * restore ability to localise info box headings

-Update translation files (again) [Vas Crabb]

-Fix info box navigation when system selection menu doesn't have focus, and fix up some translations for recent changes [Vas Crabb]

-New working game [smf-]
 * Carrier Air Wing (USA 901130) [mastercello]

-input_merger: syncronise on the way in, extend to 32 inputs, make some more variants, get rid of virtual call [Vas Crabb]
 * bublbobl.cpp, missb2.cpp: reimplemented sound cpu semaphores and sound nmi according to schematics. Implemented sound semaphores
    into tokio as well, fixing SOUND ERROR in test mode. Added notes about sound cpu addressing. Reimplemented /SRESET as a separate
    function called on sound cpu reset according to schematics. Added correct watchdog to bubble bobble and tokio, and disabled it
    on the bubble bobble prototype. Added proper 'wired-or' sound cpu IRQs to bubble bobble. Renamed 'slave' cpu to 'subcpu' to
    match schematics. [Lord Nightmare, Vas Crabb]

-Looking at attract mode, graphics rom 39 is obviously bad. The 32/33 & 38 match the combined 3m rom in cawing, so I extracted 39
 from that. [smf-]

-Refactor server_{ws,http}.hpp into separate interface and implementation. (#2548) [Christian Brunschen]
 * Refactor server_{ws,http}.hpp into separate interface and implementation headers. When shutting down the HTTP server, also
    explicitly stop the asio::io_context.

-ceci: Add QUIT and TEST keys (hold down TEST while resetting for diagnostic) [R. Belmont]

-Fix MT #6645 [AJR]

-ceci: complete keyboard, fix banking so Chinese mode doesn't crash [R. Belmont]

-ceci: Cleanup, fixed several banking errors, Chinese mode works now [R. Belmont]

-janptr96: Change CPU type to TMPZ84C015 and drive interrupts through internal CTC [AJR]

-ceci: Fixed spacebar bug that made it impossible to type BASIC programs, fixed C300 banking, added HGR color killer softswitch.
 [R. Belmont]

-internal UI improvements: [Vas Crabb]
 * Greatly reduce copy/paste code for drawing menu header/footer boxes
 * Display full name of selected slot device below slots menu
 * Fix up spacing on dircetory configuration menu
 * Fix min/max for UI font rows per screen setting

-Updated Translation [BraiNKilleRGR]

-minimaws: add support for INI options preview and explicit defaults [Vas Crabb]

-make filter names localisable, fix keyboard navigation of software filter box, encapsulate a couple more things in selmenu and
 friends, get rid of hacks in selector tying it to implementation details of other menus [Vas Crabb]

-Update Chinese translations [YuiFAN]

-gyruss: Various small updates  [Dirk Best, Tele-Viper]
 * Add missing dip location for DSW3
 * Fix dip switches for gyrussce
 * Add correct labels and locations to gyrussce
 * Fix labels for gyrussb
 * Update diagnostic ROM info
 * Adjust some memory region sizes
 * Remove unused DRIVER_INIT

-(not sure what happenend there) [Dirk Best]

-didact: Updated LOG support to latest cut [Joakim Larsson Edstrom]

-new working clone - Mega Zone (program code L) [briantro]

-Adding #include <cctype> [Nathan Woods]

-alphatro: added cart slot and hook for cartridge software list. [R. Belmont]

-MT 06649 [Robbbert]

-Polymorphic machine/software list filters: [Vas Crabb]
 * Localisable filter names
 * Uniform interface for most filters without far less special-casing
 * Stacking year/manufacturer/etc. does OR rather than useless AND
 * Prevent stacking contradictory filters (e.g. parents and clones)
 * Fix alignment of filter list
 * Removed most of the lambdas added the other day
 * There's no longer an implicit "not BIOS" filter
 * Can't add (un)available to custom machine filter (will address)

-New skeleton driver: Nintendo GameCube [Dirk Best]
 * The driver currently decrypts the IPL and the CPU executes the first few instructions.

-gamecube: Fix regions so that non-US correctly executes too [Dirk Best]

-new working clone - Crime Fighters 2 (Japan, 4 Players, ver. N) [briantro]

-psi98: Add keyboard slot interface, create skeleton for keyboard [Dirk Best]

-Remove a whole lot of I64 from format strings. [Vas Crabb]
 * There are a couple of issues here:
 * Firstly, the determining factor for whether I64 or ll is needed as the size qualifier doesn't depend entirely on whether you're
    using MSVC or not, it depends on the the C runtime library.  The msys64 C runtime apes the Microsoft runtime and requires I64 as
    well, so a lot of files where LLFORMAT had been copy/pasted wouldn't work right if you depeneded on it anyway.
 * Secondly, one of the major benefits of util::string_format, util::stream_format and logerror in their current forms is that you
    don't need size specifiers for integers at all (unless you're using them to truncate a value, but in that case you're better off
    casting the argument for clarity).  If you do use them, logerror and friends will accept both Microsoft- and SUS-style
    independently of the C runtime.
 * So please everyone, don't go gratuitously throwing these around, and if you must use them (e.g. for osd_printf_* functions), make
    sure your conditionals are actually correct.  Also, conisder using util::string_format to do the formatting into a temporary
    string and just feeding that to the output function so you can avoid the mess.

-psi98: Add HLE ASCII keyboard and make it default [Dirk Best]
 * Keyboard input now works

-ui: improve layout of art/info box, support mousewheel scroll in info text, allow home/end to jump to beginning/end of filter list,
 consolidate logic [Vas Crabb]

-Update strings.po (#2554) [aviloria]
 * Update Spanish strings

-Don't process every character individually when searching - this reduces lag if you keep typing while a big list is searched.
 [Vas Crabb]

-changela: Change default DIP setting to keep coin counters separate [AJR]

-mjelctrn, mjembase, majxtal7, neruton: Change CPU type to TMPZ84C015 and improve interrupt handling [AJR]

-ui: make category filter work like all the other filters [Vas Crabb]
 * category filter is now saved/restored if it's last used
 * category filter can be used in composite custom filters
 * category filter now provides UI rather than relying on options menu
 * less confusing when no categories found
 * also de-duplicated code for drawing category list

-dynax.cpp: Use address map bank device for most games in this driver (plus htengoku). Many of these games will now successfully
 retrieve the local time at the start through an RTC device previously treated as read-only. [AJR]

-alphatro: support 8K carts from the command line + add cart software list [R. Belmont]

-fix drawing software art/info when keyboard focus leaves list, consolidate more logic, more code deduplication, fix gutters on dats
 view, fix fallthrough from dats to save [Vas Crabb]
 * there's some weirdness with shortcust for dats/export/favourite toggle if they result in a character being typed

-fixeight: EEPROM fixes [AJR]
 * Correct the decryption of some V25 opcodes used in the EEPROM service routine
 * Remove the ugly routine that hardcoded a region for each set
 * Add and document a secret input that rewrites the EEPROM for any region

-add minimal support for reading Adam7 interlaced PNG [Vas Crabb]

-Delay data capture timing for MSM5205 and MSM6585 (should help with synchronization later) [AJR]

-More PNG handling overhaul: [Vas Crabb]
 * Unify code for copying PNG data into bitmap for MAME and pngcmp
 * Fix upsampling of monochrome PNGs (need to splat across byte)
 * Add support for greyscale+alpha
 * Detect more unsupported conditions rather than just behaving badly

-ui: save/restore images/info selection in right panel [Vas Crabb]

-PNG: fix unfiltering [Vas Crabb]

-namcos1.cpp: Fixed joystick dropping inputs bug for crouching/running actions in Beraboh Man [Angelo Salese]

-png: support 16-bit samples [Vas Crabb]

-png: make it not leak memory by default, and look a but more like C++ [Vas Crabb]

-psi98: Update memory handling, add video memory reading, timer fixes [Dirk Best]
 * This allows KOS to boot.

-psi98: Add gfx mode rendering, fix vsync timer, update some clocks [Dirk Best]

-Update mos6526.cpp [David Viens]
 * Some new demos and song uses CIA1/CIA2's timer values and serial shift register as code to execute! In order to properly debug
    what is doing on one needs the debugger to _see_ at least some of those values, hence the "if
    (machine().side_effect_disabled())" on select registers only.

-PNG: support greyscale with transparent pen, encode/decode text chunks as UTF-8, don't crash on trying to write back a text chunk
 read from a PNG file, enforce restrictions on keywords [Vas Crabb]

-move some content for release archive out of build repo into main repo [Vas Crabb]

-psi98: Hook up RTC [Dirk Best]

-Fix to MameTesters bug #6657 (#2560) [npwoods]
 * The source of the issue is that the logic for rotating slot options was broken.  It would count selectable options and skip over
    options that were not selectable, except for the specific scenario where the index was zero.  I ended up largely replacing the
    logic to be more C++-ish.

-add a not BIOS machine filter (useful in composite filters), support RGB PNG with transparent pen because why not [Vas Crabb]

-fmtowns_cd.xml: add several entries, update undumped list [r09]
 * Added software list entries from various sources:
 * Nihon Mukashibanashi, The Queen of Duellist Gaiden Alpha Light [yukin / Tokugawa Corporate Forums]
 * DOR Special Edition '93 (alt), Gokko Vol. 03 - Etcetera [redump.org]
 * Europa Sensen, Nobunaga no Yabou - Bushou Fuunroku, Inindou - Datou Nobunaga [Reuental]
 * Also, updated the undumped list and merged the Towns and Marty list, since there is no real distinction between them. Some games
    are Marty-compatible, but only some of them were advertised as such, and there are no Marty-only games.

-fmtowns_flop.xml: add several entries [r09]
 * Added Illusion City and Ving Software Collection, both from yukin (Tokugawa Corporate Forums).

-labyrunr.cpp: fixed tile-sprite priorities, mostly visible when exiting an area in most stages. [Angelo Salese]

-new machines promoted to WORKING - TH Strikes Back [David Haywood, Kevin Eshbach]
 * note, if you have old nvram file delete it or you won't see any improvement.

-deco32.cpp: rewritten interrupt handling [Angelo Salese]

-deco32.cpp: improved lightgun support for Locked N Loaded [Angelo Salese]
 * it's now possible to actually play the game to some extent assuming you recalibrate the guns by holding both service buttons.
    Game randomly crashes tho so not yet markable as working.

-irem_cpu.cpp: add some infos about the Superior Soldiers sound CPU [caius]

-mario.cpp: identified marioj as Revision C [Corrado Tomaselli]

-hp9845: re-factored handling of HTI images into a dedicated format module [fulivi]

-hp9845: re-factored hp9845_tape module of imgtool to use HTI format [fulivi]

-hp85: implemented tape drive [fulivi]

-add basic device for saturn_cdb to load the roms. [David Haywood]

-hiscore.dat: Updates [Leezer]

-New working clone - WWF Superstars US rev 6 (and renamed sets to make more sense), New working clone - 1943 Japan original.  I have
 a pristine original 1943 Japan - when comparing BM01 to the existing MAME BM01 it's clear the existing set has been hacked to
 remove protection.  Renamed that set appropriately. [Bryan McPhail]

-Update om6502.lst [David Viens]
 * Now passes Lorenz testsuite-2.15's cputiming.prg (and does not break laxay.prg) Ref: NMOS 6510 Unintended Opcodes no more secrets
    (v0.91 - 24/12/16) http://csdb.dk/release/?id=152327 page 14 ($BF) cycles = 3 to read, and 4+1 if page boundary.

-igs011.cpp update [Luca Elia]
 * Decrypted vbowlhk and added its own bitswaps for IGS003 and IGS011
 * Found dips to perform a protection test in vbowl. Changed IGS012 mode toggling to pass the test.
 * Changed IGS003 command 48 in lhb2 and vbowl to potentially work in more cases (based on lhb2 tables)

-psi98: Add software list [Dirk Best]

-alphatro: added BIOS set for machine w/Bicom graphics [Team Europe, rfka01, R. Belmont]

-unkfr belongs in 4enraya (which was my guess when it was mentioned) (#2572) [David Haywood]
 * unkfr belongs in 4enraya (which was my guess when it was mentioned) doesn't seem much point in having a complete non-working
    driver in the source for it when it boots as a romswap.

-upd765: Don't instantly finish the RECALIBRATE command [Dirk Best]
 * The RECALIBRATE command would instantly finish if the drive was already at track 0. This introduces a slight delay, so that code
    can execute between issuing the command and generating an interrupt. This fixes accessing the second drive on the psi98 driver.

-chanbara.cpp: identified sprite flip X (player sword thrusts) [Angelo Salese]

-dectalk.cpp: fixed firmware 1.8 to use different dsp rom from firmware 2.0, and some driver cleanup [Lord Nightmare]

-m68340: Added implementations for VCO clock synthesizer and Timer module Counters, IRQ:s and one operational mode
 [Joakim Larsson Edstrom]

-upd765: Make SEEK also take some time, fixes KOS FORMAT command [Dirk Best]

-psi98: Hook up sound [Dirk Best]

-fmtowns: support vertical zoom greater than x2.  Fixes Evolution. [mahlemiut]

-flstory: Fix CPU communication issue that sometimes caused sound to disappear entirely [AJR]

-Fixed MameTesters bug #6621 [Nathan Woods]

-aristmk5 updates (from Heihachi_73) fixes some sets, adds honeypot and venicea5 [David Haywood]

-alphatro_flop: replace bad dumps for CP/M and BASIC with good ones. [R. Belmont]

-PT_BR language updated [Ashura-X]

-Improve Brazilian Portuguese translation [Felipe Sanches]

-fmtowns: improve graphic layer placment.  Games with different sized layers now display better. [mahlemiut]

-decomult: Replace gross hack for banking "dongle" with something likelier [AJR]

-Update Chinese translations [YuiFAN]

-Update strings.po [aviloria]
 * Update Spanish strings

-Written a new device for Taito Yoke based inputs, i.e. ones found in Midnight Landing and Top Landing [Angelo Salese]

-taitoair.cpp: added screen raw parameters, fixes pilot acknowledge sound sample timing [Angelo Salese]

-gaelco3d.cpp: increase TMS ROM region, makes Football Power players models visible [MetalliC]

-Adding Alex Kidd in Miracle World 2 (#2566) [Shideravan]
 * Fan made release, which runs in original system and was also released and (limited) distributed as a physical copy. More info:
    https://youtu.be/6ntwR94J6iM https://goo.gl/9efrGv

-psi98: Rewrite HLE keyboard, all keys now supported [Dirk Best]

-chinhero: Add coin counters [AJR]

-Translation Update [BraiNKilleRGR]

-salamand: Improve VLM5030 control [AJR]

-combatscb: Hook up a second MSM5205 and improve interrupt handling [AJR]

-combatscb: On closer examination, there's only one MSM5205 after all [AJR]

-UI improvements: [Vas Crabb]
 * Make (Un)Available a polymorphic filter (works in custom filter again)
 * Fix bugs and improve performance when detecting systems without ROMs
 * Show progress while auditing ROMs
 * Use actual INI file format for mame_avail.ini

-mb8421: Create 16-bit expanded variant and add it to thndzone/dassault [AJR]

-psi98: Hook up centronics port [Dirk Best]

-mastninj: Implement dual OPN + dual MSM5205 ADPCM sound system as in Automat [AJR]

-Update Chinese translation [YuiFAN]

-triforce.cpp: redumped Virtua Striker 4 Ver.2006 (GDT-0020D) [rtw]

-gaelco3d.cpp: better Football Power ball mechanic simulation, promoted to working [MetalliC]

-apple2: update screen on mode-switch only if really switching [Peter Ferrie]

-att4425: new skeleton (AT&T 4425 / Teletype 56D text terminal) [Sergey Svishchev]

-new working clone - Vamf x1/2 (Europe, version 1.0.0903) [briantro]

-dvk_ksm: baud rate generator + source cleanup (#2432) [Sergey Svishchev]

-new drivers for "Control ID x628" fingerprint-reader and for the NT7534 LCD controller (#2583) [Felipe Corrêa da Silva Sanches]
 * initial skelethon: ControlID X628 fingerprint reader
 * first draft of an implementation of the NT7534 device (LCD controller)
 * fix emulation of ControlID x628 + NT7534 LCD controller
 * cidx628: fix LCD color palette on Control ID x628 driver
 * Adding a header with details of the hardware. This is the first MAME driver with an LCD controlled by a NT7534 chip, so I wrote
    an initial implementation of that new device.

-Update strings.po [theheroGAC]

-Modification for Android build (NDK r14b, build-tools 21.1.2 and gradle 2.2.1) (#2585) [Miso Kim]

-Actually you did a very very good job :) (no whatsnew) [Miodrag Milanovic]

-hp85: fixed a bug in tape gap detection [fulivi]

-Update German Strings [Rene Single]

-new WORKING clones  Alligator Hunt (unprotected, set 2) [David Haywood, Peter Wilhelmsen]
 * this was purchased as part of the quest to find a 2nd working Alligator Hunt still using the DS5002FP rather than the unprotected
    code, took a gamble on it because it was an unknown set, turns out it's unrprotected but very different to the set in MAME.
 * also unrelated but marked unkfr as working since I can't find an issue with it

-mitchell.cpp: added pals and eeprom dumps to pkladiesla, also corrected rom labels [f205v]

-psi98: Hook up serial ports, mark driver as working [Dirk Best]

-thoop2.cpp: Added PCB layout for TH Strikes Back [Brian Troha]

-Update strings.po [theheroGAC]

-Update Spanish translation [aviloria]

-k2000: added sample ROMs [R. Belmont, anonymous]

-floppy: Added FLOPPY_HFE_FORMAT to default_floppy_formats. [Nigel Barnes]

-bbc: BeebSID slot device for the 1MHz bus. [Nigel Barnes]

-imgtool: hopefully fixed the "GET" command [fulivi]

-ioport.cpp: return explicit "file not found" error if inp file isn't found on playback, added error code number to any other error
 found [Angelo Salese]

-Validate BIOS names and fix most errors found: [Vas Crabb]
 * Error on characters other than [a-z0-9.-_] in name
 * Error on duplicate name or description
 * Error on non-existent default BIOS
 * Still errors for duplicate BIOS descriptions in AdamNet FDC and mc1502 - I dont' know enough about these systems to make useful
    descrptions. Could someone who knows what these things are please disambiguate the descriptions?
 * Adam FDC descripes 320ta, dbl24 and dsdd as "320KB DSDD"
 * mc1502 describes v531 and v531_92 as "v5.31 12/10/92"

-jangou_blitter.cpp: rewritten blitter setters [Angelo Salese]

-nightgal.cpp: Fix Night Gal Summer GFX ROM out of bounds accesses [Angelo Salese]

-nightgal.cpp: added preliminary protection emulation for Night Gal Summer [Angelo Salese]

-Swedish translation [Edstrom]

-he's just this guy, you know *nw* [Stiletto]

-missed one, sorry *nw* [Stiletto]
 * missed one, sorry *nw*

-Rewrite mmodular.cpp to use the new mmboard device. [Sandro Ronco]

-acorn_dsk: Added OPUS_DDCPM_FORMAT [Nigel Barnes]
 * Removed ACORN_CPM_FORMAT, same geometry as ACORN_SSD_FORMAT/ACORN_DSD_FORMAT
 * Improved find_size/identify for SSD/DSD formats
 * ACORN_DOS_FORMAT 640K now handled as ACORN_ADFS_OLD_FORMAT
 * Fixed geometry for ACORN_DOS_FORMAT 800K
 * bbc_acorn8271: Added Amcom DFS A7874
 * bbc_opus8272: New Opus 8272 FDC device with DDOS 3.00, not yet working.
 * wd177x_dsk: Apply sector_count and gaps to track description.

-tube: New TUBE device. Acorn Tube ULA for use in Acorn 2nd Processors [Nigel Barnes]

-bbc: Added various 2nd processors as Tube slot devices: [Nigel Barnes]
 * Acorn 6502 2nd Processor, Acorn 65C102 Co-Processor, Acorn Z80 2nd Processor, Acorn 80186 Co-Processor, Casper 68000 2nd
    Processor

-Update Chinese translation [YuiFAN]

-update Russian translation [MetalliC]

-new machine NOT WORKING : Kick Ball [Darksoft, Sean Sutton, Surgeville, Smitdogg, The Dumping Union] (#2595) [David Haywood]
 * new machine NOT WORKING : Kick Ball [Darksoft, Sean Sutton, Surgeville, Smitdogg, The Dumping Union] hardware is definitely
    bootleg / cloned power spikes, fonts etc. are video system, and the code I think is hacked up Power Spikes too. sprite system /
    tilemaps etc. are modified tho so needs work.

-c64_cass.xml: Added Shado BBC Emulator Software. [Curt Coder]

-ibm5170.xml: Added Diagnostics Diskette for IBM Personal System/2 model 70/80 (v1.06, Finnish). [Curt Coder]

-fmtowns: add preliminary RS232C port. [mahlemiut]

-add better dump of PAL Dreamcast flash ROM [rtw]

-bbc: minor video improvements [Nigel Barnes]
 * fixed cursor size
 * double clock in MODE7 to counteract non-implemented interlace

-jockeyc: add layout with keyboards [Luca Elia]
 * clean up inputs, add own dips
 * correct rtc, emulate hoppers
 * hook up outputs, nvram, trackball (for hidden editor)

-updated swedish translation [Joakim Larsson Edstrom]

-updated swedish translation [JoakimLarsson]

-imgtool: a fix for the "GET" command bug Hi, this PR is for my attempt at fixing the bug in imgtool I mentioned here:
 http://forums.bannister.org//ubbthreads.php?ubb=showflat&Number=110649 [fulivi]
 * I'm not a super-expert in imgtool sources, so I'd like very much if N.Woods could give a look and "validate" my fix. Thanks.
 * -F.Ulivi

-Update strings.po [theheroGAC]

-Update Spanish translation [aviloria]

-Update German Strings [RafTacker]

-Fixed a bug in gap detection of DC100 tape emulation Hi, this PR is for a small fix to DC100 cassette emulation (used in HP 9845 &
 85 systems) to prevent false gap detections (which, in turn, prevent reading of tape). Thanks. [fulivi]
 * -F.Ulivi

-Update italian strings.po [theheroGAC]

-Modification for Android build (NDK r14b, build-tools 21.1.2 and gradle 2.2.1) # Preparation for Android build [meesokim]
 * NDK-14b: https://developer.android.com/ndk/downloads/older_releases.html#ndk-14b-downloads SDK: command line tools
    https://developer.android.com/studio/index.html#downloads build-tools: 21.1.2 by using sdkmamager in the Android SDK. JDK:
    jdk1.8.0_144
 * *The following environmental variables required (examples for your understanding).** ``` export ANDROID_HOME=/opt/android export
    ANDROID_NDK_ROOT=/opt/android-ndk-r14b export
    ANDROID_NDK_ARM=$ANDROID_NDK_ROOT/toolchains/arm-linux-androideabi-4.9/prebuilt/windows export
    ANDROID_NDK_ARM64=$ANDROID_NDK_ROOT/toolchains/aarch64-linux-android-4.9/prebuilt/windows-x86_64 export
    ANDROID_NDK_LLVM=$ANDROID_NDK_ROOT/toolchains/llvm/prebuilt/windows export ANDROID_NDK_HOME=$ANDROID_NDK_ROOT export
    JAVA_HOME=/opt/jdk1.8.0_144 ```
 * # Step by Step for Android build
 * *- build command for libSDL2.so and libmain.so** `$ make android-arm` for 32bit `$ make android-arm64` for 64bit
 * *- copy some rom files into the following directory for initial work** android-project/app/src/main/assets/roms
 * *- build command for android apk by using gradle** `$ android-project/gradlew -p android-project assembleDebug`
 * *- Installation of final output by using adb** `$ adb install -r android-project/app/build/outputs/apk/app-debug.apk`
 * *- additional roms path in your android phone/tablet** /Android/data/org.mamedev.mame/roms /sdcard/Download /mame/roms
 * *Known issues**
   - Mouse doesn't work properly. It works fine by a USB or a bluetooth keyboard.
   - Joypad doesn't work properly.
   - Keyboard doesn't work if it has plugged during MAME running.
   - autoframeskip or 8 frameskip is required for proper working.

-att4425: new skeleton (AT&T 4425 / Teletype 56D text terminal) (take 2) Updated after review in
 https://github.com/mamedev/mame/pull/2522 [shattered]

-new drivers for "Control ID x628" fingerprint-reader and for the NT7534 LCD controller [felipesanches]

-Translation Update [BraiNKilleRGR]

-Update strings.po Update Spanish strings [aviloria]

-PT_BR language updated [Ashura-X]

-m68340: Added implementations for VCO clock synthesizer and Timer module Counters, IRQ:s and one operational mode. I intend to add
 the serial module and also refactor the modules as devices, moving the whole implementation from machine to cpu/68000 similar to
 the h8 derivates. But that will not be the next thing I do so feel free to review and merge this now, there are a number of other
 drivers that awaits more 68340 functionality apart from the dbox driver I am working on. [JoakimLarsson]

-aristmk5 updates (from Heihachi_73) fixes some sets, adds honeypot and venicea5 [DavidHaywood]

-Fixed MameTesters bug #6621 [npwoods]

-unkfr belongs in 4enraya (which was my guess when it was mentioned) doesn't seem much point in having a complete non-working driver
 in the source for it when it boots as a romswap. [DavidHaywood]

-Update om6502.lst Now passes Lorenz testsuite-2.15's cputiming.prg (and does not break laxay.prg) Ref: NMOS 6510 Unintended Opcodes
 no more secrets (v0.91 - 24/12/16) http://csdb.dk/release/?id=152327 page 14 ($BF) cycles = 3 to read, and 4+1 if page boundary.
 [plgDavid]

-add basic device for saturn_cdb to load the roms seems to make more sense than just sitting on the ROMs, which as far as I can tell
 benefits absolutely nobody... [DavidHaywood]

-Emulation of HP85 tape drive Hi, [fulivi]
 * this set of commits adds the emulation of HP85 tape drive. This computer had a HP custom chip (whose part number was 1MA6-0001)
    as tape controller. In order to add the 1MA6 emulation, I first separated the support for the HTI tape format into a proper
    module under "lib/formats". Support for this format was previously embedded into TACO driver (tape controller of HP9845) and the
    related imgtool module. It is now independent of any hw driver or support tool.
 * Thanks.
 * -F.Ulivi

-Adding Alex Kidd in Miracle World 2 Fan made release, which runs in original system and was also released and (limited) distributed
 as a physical copy. More info: https://youtu.be/6ntwR94J6iM https://goo.gl/9efrGv [Shideravan]

-Added several entries to FM Towns softlists See commits for details. [rzero9]

-Update mos6526.cpp Some new demos and song uses CIA1/CIA2's timer values and serial shift register as code to execute! In order to
 properly debug what is doing on one needs the debugger to _see_ at least some of those values, hence the "if
 (machine().side_effect_disabled())" on select registers only. [plgDavid]

-Fix to MameTesters bug #6657 The source of the issue is that the logic for rotating slot options was broken.  It would count
 selectable options and skip over options that were not selectable, except for the specific scenario where the index was zero.  I
 ended up largely replacing the logic to be more C++-ish. [npwoods]
 * I also changed the options list to be std::map instead of std::unordered_map.  Rotating the latter is indeterminent.

-Update strings.po Update spanish strings [aviloria]

-Adding #include <cctype> This seems to be necessary for MSVC to get std::tolower() [npwoods]

-didact: Updated LOG support to latest cut [JoakimLarsson]

-Updated Greek Translation [BraiNKilleRGR]

-Refactor server_{ws,http}.hpp into separate interface and implementation. Refactor server_{ws,http}.hpp into separate interface and
 implementation files. [cbrunschen]
 * Use std::weak_ptr from websocket_connection_impl to webpp::Connection to avoid reference cycles.
 * When shutting down the HTTP server, also explicitly stop the asio::io_context; this allows the built binary to exit cleanly.

-fix MT 06644 [DavidHaywood]

-Better documentation for midvunit wheel board Found manual with schematics and it all fits well. Couldn't find any jeds for the
 PALs however, so had to work backwards for them. [Risugami]

-Update strings.po Update spanish strings. [aviloria]

-misc housekeeping / one-liners [DavidHaywood]
 * removed am already dumped game from the undumped list in balsente.cpp
 * change copy+pasted comment in hangzo to better reflect that the tiles are not encrypted
 * fixed typo in ghox memory map

-Imgtool:  Classic Mac:  Made the logic for B&W icon able to handled non-masked set pixels [npwoods]

-Imgtool:  Fixed features.supports_geticoninfo [npwoods]

-Added NES carts information I've been extended the information in the NES game list with some games I own. Although I have kept the
 dates in the game list, they vary in my games, so they may need to be changed: [inigomartinez]
 * Super Mario Bros.: The date in my cart's PCB is 1986 instead of 1987.
 * Super Mario Bros. 2: The date in my cart's PCB is 1988 instead of 1989.
 * Trog!: The date in my cart's PCB is 1986 instead of 1991.
 * I have also uploaded some images of Pinball that verify the information that has been added.
 * Finally I followed the current rom naming from the game list, as I did in #2537 with SNES, and again, strictly speaking and
    looking at the labels on the carts, shouldn't the names be in uppercase?

-Added SNES carts information The following information has been added to the SNES game list: [inigomartinez]
 * Dragon Ball Z - Super Gokuu Den - Kakusei Hen: Chip names on the PCB layout have been added. Also the rom name has been fixed by
    renaming it to the proper program name. I kept the date in the game list, which is the date in the cart label (1995), though the
    date in the PCB label is different (1993).
 * Ranma ½: I have added information of an earlier Ranma ½ revision, dated 1992 instead of 1993. It uses two roms as program roms,
    which could be 2Mb each summing up 4Mb like the 1993 version, or 1Mb U1 and 512Kb U2 like the French version. I have tried to
    find information about the ROM chips without any success. I have also added the chip names on the PCB layout.
 * Donkey Kong Country 2 - Diddy's Kong Quest: I have added information of an earlier Donkey Kong Country 2 revision. The current
    dump is SPAL-ADNP-1, while this car is SPAL-ADND-0. It uses SNSP-AxyD-suffix as product code which actually is not documented in
    the Europe's catalogue product code. I kept the date in the game list, thought the cart label has 1992 as date, and the PCB has
    1993. I don't know which one is the correct one. I have also kept the `cart_revision`value as A, though I don't know how to
    check it, and the program ROM size, which I suppose will also be 4Mb.
 * Pilotwings. The information on my cart matches the one in the game list, though the `serial` and `cart_back_label` values are
    different as the cart corresponds to the spanish market. I have also added the proper `CIC` type.
 * The new Ranma ½ and Donkey Kong Country 2 - Diddy's Kong Quest are commented as `Pending` until the information can be verified.
 * Finally I followed the current rom naming from the game list, though strictly speaking and looking at the labels on the carts,
    shouldn't the names be in uppercase?

-SAM6883: Fixed a bug by which VDG addressing incorrectly honored the page bit This affected the CoCo/Dragon family of drivers
 [npwoods]
 * Special thanks to Ciaran Anscomb for identifying this problem

-add HD647180X MCU dumps to Whoopee and Ghox  [Team Caps0ff] This adds  HD647180X MCU dumps to Whoopee and Ghox, allowing for sound
 emulation in both of them. It also fixes the high score table background in Ghox, which was also MCU related [Team Caps0ff]

-[Imgtool] C++-ification of imgtool_forkent structure [npwoods]

-Translation Update [BraiNKilleRGR]

-Imgtool:  Eliminated Imgtool-specific rand() function [npwoods]

-Imgtool:  Merged normalize_filename() into cannonicalize_path(), C++-ification [npwoods]

-Update strings.po [Ashura-X]

-Rainbow-100: use Z80SIO instead of Z80DART; make UCSD Pascal boot again Incorporate change from Z80DART to Z80SIO proposed by
 Edstrom. Also make UCSD Pascal boot again. [Bavarese]

-ms0515: add sound, change clock rate to real one [shattered]

-revert the speed fix in Galaxia/Astro Wars that caused all sets to sound wrong The present S2636 core has been rewritten more than
 a year ago by Vas to adapt the tone frequency from the refresh rate, and this made me realize that my speed fixes for galaxia.cpp
 were incorrect. [kazblox]

-changed set names for 'grtesoro' sets to 'play2000' to more accurately represent the name of the game [DavidHaywood]
 * gave it it's own machine structure and memory map instead of borrowing Maniac Square one added some workarounds so that it
    actually boots, it might not be heavily protected compared to the Gaelco titles and there doesn't seem much chance of us finding
    a working one. fixed GFX rom loading for the game based on above work.

-gb.cpp: optimize the channel update methods. I recently noticed that it takes very long to load a gba state, sometimes dozens of
 seconds, and the older the state is, the longer it takes to load. [057a3dd61f99517a3afea0051a49cb27994f94d]
 * I found out it's caused by gameboy_sound_device does not save the m_last_updated variable, and after loading a state, in the
    update_state method, now could end up being much larger than m_last_updated, and leads to substantial yet wasted calculation of
    the channel state.
 * Simply adding save_item(NAME(m_last_updated)) should fix the problem, however, since it will break current existing saved states,
    and optimize the channel update methods is in the TODO list, I took the latter choice, now the calculation to update the channel
    state is really negligible and the state loading is almost instantaneous.

-dvk_ksm: baud rate generator + source cleanup [shattered]


New working machines
--------------------
Garfield (Konami handheld) [hap, Sean Riddle]
Double Dribble (Konami handheld) [hap, Sean Riddle]
NFL Football (Konami handheld) [hap, Sean Riddle]
The Adventures of Bayou Billy (Konami handheld) [hap, Sean Riddle]
lynx: Crystal Mines II - Buried Treasure (Euro, USA) [anonymous]
apple2: Nightmare Gallery [Ian B.]
China Education Computer I [R. Belmont, Jorma Honkanen]
ibm5150: Superbase 5 Demo [breiztiger]
ibm5150: B.A.T. [ArcadeShadow]
ibm5170: RobotC2 Demo [breiztiger]
ibm5170: B.A.T. II, Wing Commander [ArcadeShadow]
Anpanman Pico Wakuwaku Pan Koujou (Jpn) [Team Europe, The Dumping Union]
Ett År med Nalle Puh (Swe) [Team Europe, The Dumping Union]
ibm5170: Amí [Justin Kerk]
ibm5170: Wing Commander: The Secret Missions, Wing Commander: The Secret Missions 2 [ArcadeShadow]
Tekken Battle Scratch [ShouTime, Jan Stuhler, pablopelos, Smitdogg, The Dumping Union]
Poosho Poosho [caius, Brian Troha, Smitdogg, Ryan Holtz, rtw, The Dumping Union]
Mephisto Polgar 10MHz [Sandro Ronco]
bbcb_flop: Acornsoft Hits 1 & 2, The Quill, Snapple Hopper, Trivial Pursuit (Genus/Baby Boomer/Young Players Editions),
  [Nigel Barnes]
Modem Master, and various educational titles. [Nigel Barnes]
BeebSID 1-17, Beeb SID Quiz [PitfallJones]
bbcm_flop: SID Music 1 & 2 [Tom Walker]
electron_flop: All Electron User Group (5.25") disks, Starspell Dictionary Disk (3.5" and 5.25") [Nigel Barnes]
bbc_flop_6502: all items now supported [Nigel Barnes]
bbc_flop_65c102: all items now supported [Nigel Barnes]
bbc_flop_68000: all items now supported [Nigel Barnes]
bbc_flop_80186: all items now supported and added Master 512 Technical Guide Programs [Nigel Barnes]
bbc_flop_z80: all items now supported and added Double Density CP/M [Nigel Barnes]
ibm5170: Wing Commander II - Vengeance of the Kilrathi [ArcadeShadow]
Cool Minigame Collection (Italy) [hammy]


New working clones
------------------
Fidelity Sensory Chess Challenger 12 [hap, Berger, yoyo_chessboard]
Super Chase - Criminal Termination (1992/01/18 18:29:18 CHASE 3 VER 1.30, prototype) [Trol]
Street Fighter II: The World Warrior (Quicken, bootleg) [Moffitt]
Ordyne (World) [Corrado Tomaselli]
Street Fighter (World) (protected) [Corrado Tomaselli]
Daiku no Gensan (Japan, M82) [Hammy, Jon H, The Dumping Union]
B.Rap Boys Special (World) [Phill @NES4Life]
DoDonPachi III (World, 2002.05.15 Master Ver) [neohyphengeo productions]
note, 'new parent' as technically it's the newest non-Japan set (actually the only non-Japan set) and is actually newer than the
  original Japanese release (but older than Black Label)  Some may disagree with this designation but it follows 'MAME standard'
  [David Haywood]
Popeye (Japan, Sky Skipper hardware, Older)  [Justin Rudebaugh]
Mega Zone (program code L) [Corrado Tomaselli, The Dumping Union]
Crime Fighters 2 (Japan, 4 Players, ver. N) [Guy B]
Crash Road (bootleg of Space Chaser) [Ed Cross]
Donkey Kong Jr. (bootleg on Moon Cresta hardware, set 2) [The Dumping Union / Team Recreativas.org, AJR]
this has been sitting around for about 7 years, so no idea about the credit. [David Haywood]
Port Man (Japan) [ShouTime]
Crazy Climber (US set 2) [John of http://www.johnsarcade.com]
Vamf x1/2 (Europe, version 1.0.0903) [Rod_Wod, Klaus Sommer, The Dumping Union]
Super Athena (bootleg) [Hammy]
this was purchased as part of the quest to find a 2nd working Alligator Hunt still using the DS5002FP rather than the unprotected
  code, took a gamble on it because it was an unknown set, turns out it's unrprotected but very different to the set in MAME.
  [DavidHaywood]
also unrelated but marked unkfr as working since I can't find an issue with it [DavidHaywood]
this has been sitting around for about 7 years, so no idea about the credit. [DavidHaywood]
DoDonPachi III (World, 2002.05.15 Master Ver) [neohyphengeo productions]
note, 'new parent' as technically it's the newest non-Japan set (actually the only non-Japan set) and is actually newer than the
  original Japanese release (but older than Black Label)  Some may disagree with this designation but it follows 'MAME standard'
  [DavidHaywood]


Machines promoted to working
----------------------------
dumped using the method developed by Morten Shearman Kirkegaard and Peter Wilhelmsen [DavidHaywood]
note, if you have old nvram file delete it or you won't see any improvement. [DavidHaywood]


Clones promoted to working
--------------------------
Virtua Bowling (Honk Kong, V101HJS) [Abelardator2, Luca Elia]
International Toote II (v1.24, P387.V01) [Gerald (COY)]


New machines marked as NOT_WORKING
----------------------------------
Monomachine MK2 [R. Belmont, tbd]
Machinedrum MK2 [R. Belmont, tbd]
Access Virus A [R. Belmont, tbd]
Access Virus B (Ver. T) [R. Belmont, tbd]
Access Virus C [R. Belmont, tbd]
Access Virus Rack [R. Belmont, tbd]
Access Virus Rack XL [R. Belmont, tbd]
Access Virus Classic [R. Belmont, tbd]
Kurzweil K2000 [David Ryskalczyk, R. Belmont]
Unknown French encrypted game [Roberto Fresca, Arzeno Fabrice]
Sengoku Mahjong Kurenai Otome-tai [Ralph Wallace, system11, The Dumping Union]
Nurete Mitaino... - Net Idol Hen [Ralph Wallace, system11, The Dumping Union]
Konnano Hajimete! [Ralph Wallace, system11, The Dumping Union]
Kontron PSI98 [Dirk Best, rfka01]
princ: Hobī Kurabu [TeamEurope]
princ: Kodomo No Omocha [TeamEurope]
Altos 8600 [Carl, Al Kossow]
Lejonkungen Äventyr (Swe) [Team Europe, The Dumping Union]
Mephisto RISC 1MB [Sandro Ronco]
Mephisto RISC II [Sandro Ronco]
Learning-Window Teaching Machine (Rev 3)  [Kevin Horton]
Learning-Window Teaching Machine (Rev 2)  [Kevin Horton]
Learning-Window Teaching Machine (Rev 1)  [Kevin Horton]
Learning-Window Teaching Machine (French)  [Kevin Horton]
Spiel Master (German)  [TeamEurope, Kevin Horton]
Mannesmann Kienzle System 9002 Terminal [Miodrag Milanovic]
Sexy Gal Tropical [BET] (Japan 850805 SXG T-02) [Vas Crabb]
passes RAM test, shows title, but the rest of the graphics are [Vas Crabb]
garbled, definitely something wrong. [Vas Crabb]
Magic Reel  [TeamEurope]
Super Game (Sega Master System Multi-game bootleg) (alt games)  [David Haywood, TeamEurope]
note, at least 1 bad dump (gfx rom) and 1 suspect dump (sound rom) [DavidHaywood]
hardware is definitely bootleg / cloned power spikes, fonts etc. are video system, and the code I think is hacked up Power Spikes
  too. [DavidHaywood]
sprite system / tilemaps etc. are modified tho so needs work. [DavidHaywood]


New clones marked as NOT_WORKING
--------------------------------
Dirt Devils (Japan, Revision A) [ShouTime]
Trigger Heart Exelica (Japan) (GDL-0036) [rtw, ShouTime]
Star Wars (1.06, Display S1.05) [Jubex77, JMan, Gore Daimon]
Virtua Fighter 4 Evolution (Version B) (GDS-0024C) [rtw, ShouTime, f205v, Darksoft]
Goldeneye (4.02) [Gore Daimon, Sergio Munemori]
Econet X25 Gateway [Nigel Barnes]
Henson CFA 3000 [Nigel Barnes]
Derby Owners Club World Edition (Rev B) [f205v, ShouTime]


Comparing 0.188 (mame0188) to 0.188 (mame0188-650-gec3caa9)

Renames
grtesoro -> play2000a Play 2000 (Super Slot & Gran Tesoro) (v5.01) (Italy)
cawingu -> cawingur1 Carrier Air Wing (USA 901012)
ordyne -> ordyneje Ordyne (Japan, English Version)
brapboysu -> brapboyspu B.Rap Boys Special (US)
brapboysj -> brapboyspj B.Rap Boys Special (Japan)
vendettaj -> vendetta2pp Crime Fighters 2 (Japan, 2 Players, ver. P)
vendetta2p -> vendetta2pw Vendetta (World, 2 Players, ver. W)
grtesoro4 -> play2000 Play 2000 (Super Slot & Gran Tesoro) (v4.0) (Italy)
fscc12 -> fscc12b Sensory Chess Challenger 12-B
vf4evo -> vf4evob Virtua Fighter 4 Evolution (Version B) (Japan) (GDS-0024B)

New working machines
--------------------
China Education Computer I
DoDonPachi III (World, 2002.05.15 Master Ver)
Double Dribble (handheld)
Garfield (handheld)
NFL Football (handheld)
PSI98
Poosho Poosho
Tekken Battle Scratch
The Adventures of Bayou Billy (handheld)
unknown 'Space Invaders' gambling game

New working clones
------------------
1943: Midway Kaisen (Japan, no protection hack)
Alligator Hunt (unprotected, set 2)
B.Rap Boys Special (World)
Carrier Air Wing (USA 901130)
Cool Minigame Collection (Italy)
Crash Road (bootleg of Space Chaser)
Crazy Climber (US set 2)
Crime Fighters 2 (Japan, 4 Players, ver. N)
Daiku no Gensan (Japan, M82)
Donkey Kong Jr. (bootleg on Moon Cresta hardware, set 2)
International Toote II (v1.24, P387.V01)
Mega Zone (program code H)
Mega Zone (program code J)
Mephisto Nigel Short
Mephisto Polgar 10MHz
Mephisto Portorose 68000
Mephisto Portorose 68020
Ordyne (World)
Popeye (Japan, Sky Skipper hardware, Older)
Port Man (Japan)
Sensory Chess Challenger 12
Street Fighter (World) (protected)
Street Fighter II: The World Warrior (Quicken, bootleg)
Super Athena (bootleg)
Super Chase - Criminal Termination (1992/01/18 18:29:18 CHASE 3 VER 1.3O, prototype)
Vamf x1/2 (Europe, version 1.0.0903)
WWF Superstars (US revision 4)
WWF Superstars (US revision 6)
WWF Superstars (US revision 7)

Machines promoted to working
----------------------------
Football Power
Mephisto Academy
Mephisto Almeria 68000
Mephisto Almeria 68020
Mephisto Berlin Pro 68020
Mephisto Genius 68030
Mephisto Polgar
Night Gal Summer [BET] (Japan 850702 NGS 0-01)
TH Strikes Back

Clones promoted to working
--------------------------
BBC Master Turbo
Forty-Love (Japan)
Mephisto Berlin Pro London Upgrade
Mephisto Genius 68030 London Upgrade
Mephisto London 68020
Mephisto Lyon 68000
Mephisto Lyon 68020
Mephisto Vancouver 68000
Mephisto Vancouver 68020
Virtua Bowling (Hong Kong, V101HJS)

New machines marked as NOT_WORKING
----------------------------------
8600
AT&T Teletype 4425
GameCube (Japan)
Honey Pot (03J00241, NSW/ACT)
K2000
Kick Ball
Konnano Hajimete! (Japan)
Learning-Window Teaching Machine (Rev 3)
Machinedrum SPS-1 MK2
Magic Reels
Mephisto RISC 1MB
Monomachine SFX6 MK2
Nurete Mitaino... - Net Idol Hen (Japan)
Sengoku Mahjong Kurenai Otome-tai (Japan)
Sexy Gal Tropical [BET] (Japan 850805 SXG T-02)
Star Wars: Racer Arcade
Super Game (Sega Master System Multi-game bootleg) (alt games)
System 9002 Terminal
Venice (02J02056, Venezuela)
Virus A
Virus B (Ver. T)
Virus C
Virus Classic
Virus Rack (Ver. T)
Virus Rack XL
X628

New clones marked as NOT_WORKING
--------------------------------
Derby Owners Club World Edition (Rev B)
Dirt Devils (Japan, Revision A)
Econet X25 Gateway
GameCube (Brazil)
GameCube (EUR)
GameCube (USA)
Goldeneye (4.02)
Henson CFA 3000
Learning-Window Teaching Machine (French)
Learning-Window Teaching Machine (Rev 1)
Learning-Window Teaching Machine (Rev 2)
Mephisto RISC II
Print Club (World)
Spiel Master (German)
Star Wars (1.06, Display S1.05)
Trigger Heart Exelica (Japan) (GDL-0036)
Virtua Fighter 4 Evolution (Version B) (Japan) (GDS-0024C)


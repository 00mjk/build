0.189
-----


MAMETesters Bugs Fixed
----------------------
- 00470: [DIP/Input] (seattle.cpp) hyprdriv: Despite successful calibration the brake button doesn't function. (Ted Green)
- 00975: [DIP/Input] (seattle.cpp) calspeed: Even if you choose manual gear your car has automatic gear. (Ted Green)
- 01005: [Sound] (shangkid.cpp) shangkid: In the later levels, sound starts to get really screwy. (AJR)
- 01991: [Crash/Freeze] (vegas.cpp) gauntleg: Game randomly freezes. (Ted Green)
- 04024: [Graphics] (toaplan2.cpp) ghox: Missing background for hi-score screen. (Caps0f)
- 04872: [Graphics] (labyrunr.cpp) tricktrp: Graphic priority issue. (Angelo Salese)
- 05277: [Documentation] (cps1.cpp) sf2accp2: Installation instructions and DIP settings for SF2CE (Accelerator Pt.II) hack.
  (geforcefly)
- 05608: [DIP/Input] (royalmah.cpp) mjifb, mjifb2, mjifb3: DIP Settings. (kamilz)
- 05788: [DIP/Input] (dbz.cpp) dbz: English language is not displayed. (ryuhabayusa)
- 05945: [DIP/Input] (pacman.cpp) pengojpm, pengopac: Info about dip switches. (Fortuna)
- 06259: [Graphics] (combatsc.cpp) combatsc, combascj, combasct, bootcamp, bootcampa: Wrong priority in the drill instructor screen.
  (Angelo Salese)
- 06636: [Graphics] (seattle.cpp) calspeed: Triangles flicker in calspeed. (Ted Green)
- 06639: [Crash/Freeze] (coco3.cpp) coco3, coco3h: Crash of emulated system accessing multiple floppy drives. (Dirk Best)
- 06640: [Core] (coco3.cpp) coco3, coco3h: TRS-80 Color Computer FDC data corruption issue. (Dirk Best)
- 06641: [Color/Palette] (pce.cpp) pce [sonson2]: Black & White mode doesn't work properly. (Angelo Salese)
- 06644: [Gameplay] (segae.cpp) tetrisse: Unable to play 2 Player mode. (David Haywood)
- 06645: [Sound] (ninjakd2.cpp) ninjakd2, ninjakd2c, jt104, rdaction: Missing sound. (AJR)
- 06649: [Interface] ng_cthd_prot: Wrong name (Neo Goe instead of Neo Geo). (Robbbert)
- 06657: [Interface] (c64.cpp) c64: Selecting a slot to fill for "EXP" causes Fatal Error. (Nathan Woods)
- 06659: [Documentation] (model3.cpp) swtrilgy, swtrilgya: " Arcade " is necessary in the title of this game. (J.J.Boy)


New working machines
--------------------
China Education Computer I [R. Belmont, Jorma Honkanen]
Double Dribble (Konami handheld) [hap, Sean Riddle]
Garfield (Konami handheld) [hap, Sean Riddle]
Kontron PSI98 [Dirk Best, rfka01]
NFL Football (Konami handheld) [hap, Sean Riddle]
Poosho Poosho [caius, Brian Troha, Smitdogg, Ryan Holtz, rtw, The Dumping Union]
Tekken Battle Scratch [ShouTime, Jan Stuhler, pablopelos, Smitdogg, The Dumping Union]
The Adventures of Bayou Billy (Konami handheld) [hap, Sean Riddle]


New working clones
------------------
B.Rap Boys Special (World) [Phill @NES4Life]
Carrier Air Wing (USA 901130) [mastercello]
Crash Road (bootleg of Space Chaser) [Ed Cross]
Crazy Climber (US set 2) [John of http://www.johnsarcade.com]
Crime Fighters 2 (Japan, 4 Players, ver. N) [Guy B]
Cool Minigame Collection (Italy) [Hammy]
Daiku no Gensan (Japan, M82) [Hammy, Jon H, The Dumping Union]
DoDonPachi III (World, 2002.05.15 Master Ver) [neohyphengeo productions]
Donkey Kong Jr. (bootleg on Moon Cresta hardware, set 2) [The Dumping Union / Team Recreativas.org, AJR]
Fidelity Sensory Chess Challenger 12 [hap, Berger, yoyo_chessboard]
Mega Zone (program code L) [Corrado Tomaselli, The Dumping Union]
Ordyne (World) [Corrado Tomaselli]
Popeye (Japan, Sky Skipper hardware, Older) [Justin Rudebaugh]
Port Man (Japan) [ShouTime]
Street Fighter (World) (protected) [Corrado Tomaselli]
Street Fighter II: The World Warrior (Quicken, bootleg) [Moffitt]
Super Athena (bootleg) [Hammy]
Super Chase - Criminal Termination (1992/01/18 18:29:18 CHASE 3 VER 1.30, prototype) [Trol]
Vamf x1/2 (Europe, version 1.0.0903) [Rod_Wod, TeamEurope, The Dumping Union]


Machines promoted to working
----------------------------
Football Power [MetalliC]
Night Gal Summer [BET] (Japan 850702 NGS 0-01) [Angelo Salese]


Clones promoted to working
--------------------------
Forty-Love (Japan) [ShouTime, Angelo Salese]
BBC Master Turbo [Nigel Barnes]
International Toote II (v1.24, P387.V01) [Gerald (COY)]
Virtua Bowling (Hong Kong, V101HJS) [Abelardator2, Luca Elia]


New machines marked as NOT_WORKING
----------------------------------
Altos 8600 [Carl, Al Kossow]
AT&T Teletype 4425 [shattered]
ControlID X628 fingerprint reader [Felipe Sanches]
Konnano Hajimete! (Japan) [Ralph Wallace, system11, The Dumping Union]
Learning-Window Teaching Machine (Rev 3) [Kevin Horton]
Mannesmann Kienzle System 9002 Terminal [Miodrag Milanovic]
Mephisto RISC 1MB [Sandro Ronco]
Nurete Mitaino... - Net Idol Hen [Ralph Wallace, system11, The Dumping Union]
Sengoku Mahjong Kurenai Otome-tai [Ralph Wallace, system11, The Dumping Union]
Sexy Gal Tropical [BET] (Japan 850805 SXG T-02) [ShouTime, Angelo Salese]


New clones marked as NOT_WORKING
--------------------------------
Derby Owners Club World Edition (Rev B) [f205v, ShouTime]
Dirt Devils (Japan, Revision A) [ShouTime]
Econet X25 Gateway [Nigel Barnes]
Goldeneye (4.02) [Gore Daimon, Sergio Munemori]
Henson CFA 3000 [Nigel Barnes]
Learning-Window Teaching Machine (French) [Kevin Horton]
Learning-Window Teaching Machine (Rev 1) [Kevin Horton]
Learning-Window Teaching Machine (Rev 2) [Kevin Horton]
Trigger Heart Exelica (Japan) (GDL-0036) [rtw, ShouTime]
Virtua Fighter 4 Evolution (Version B) (GDS-0024C) [rtw, ShouTime, f205v, Darksoft]
Spiel Master (German) [TeamEurope, Kevin Horton]
Star Wars (1.06, Display S1.05) [Jubex77, JMan, Gore Daimon]


New working software list additions
-----------------------------------
bbcb_flop:
  Acornsoft Hits 1 & 2, The Quill, Snapple Hopper, Trivial Pursuit (Genus/Baby Boomer/Young Players Editions),
  Modem Master, and various educational titles. [Nigel Barnes]
  BeebSID 1-17, Beeb SID Quiz [PitfallJones]
bbcm_flop:
  SID Music 1 & 2 [Tom Walker]
bbc_flop_6502:
  All items now supported. [Nigel Barnes]
bbc_flop_65c102:
  All items now supported. [Nigel Barnes]
bbc_flop_68000:
  All items now supported. [Nigel Barnes]
bbc_flop_80186:
  All items now supported and added Master 512 Technical Guide Programs [Nigel Barnes]
bbc_flop_z80:
  All items now supported and added Double Density CP/M [Nigel Barnes]
c64_cass:
  Shado BBC Emulator Software. [Curt Coder]
electron_flop:
  All Electron User Group (5.25") disks, Starspell Dictionary Disk (3.5" and 5.25") [Nigel Barnes]
ibm5150:
  B.A.T. [ArcadeShadow]
  Superbase 5 Demo [breiztiger]
ibm5170:
  B.A.T. II, Wing Commander, Wing Commander: The Secret Missions, Wing Commander: The Secret Missions 2,
  Wing Commander II - Vengeance of the Kilrathi [ArcadeShadow]
  RobotC2 Demo [breiztiger]
  Diagnostics Diskette for IBM Personal System/2 model 70/80 (v1.06, Finnish). [Curt Coder]
  Ami [Justin Kerk]


New NOT_WORKING software list additions
---------------------------------------
princ: Hobby Club, Kodomo no Omacha [TeamEurope]


Translations added or modified
------------------------------
Chinese (simplified) [YuiFAN]
Chinese (traditional) [YuiFAN]
German [RafTacker]
Greek [BraiNKilleRGR]
Italian [theheroGAC]
Japanese [Vas Crabb]
Portuguese (Brazil) [Ashura-X, Felipe Sanches]
Russian [MetalliC]
Serbian [Vas Crab, Midrag Milanovic]
Serbian (Cyrillic) [Vas Crab, Midrag Milanovic]
Spanish [A. Viloria]
Swedish [Joakim Larsson Edstrom]


Source Changes
--------------
-pengadvb: Added start/continue button (partially fixes MT04528). [Angelo Salese]

-Added a very preliminary PC9801 AMD98 sound board emulation [Angelo Salese]

-namcos1.cpp: Fixed joystick dropping inputs bug for crouching/running actions in Beraboh Man. [Angelo Salese]

-labyrunr.cpp: Fixed tile-sprite priorities, mostly visible when exiting an area in most stages. [Angelo Salese]

-deco32.cpp: Rewrote interrupt handling; improved lightgun support for Locked Loaded. [Angelo Salese]

-chanbara.cpp: Identified sprite flip X bit (player sword thrusts). [Angelo Salese]

-Wrote a new device for Taito Yoke based inputs (found in Midnight Landing and Top Landing). [Angelo Salese]

-taitoair.cpp: Added screen raw parameters, fixes pilot acknowledge sound sample timing. [Angelo Salese]

-ioport.cpp: Log explicit error if inp file isn't found on playback, added error code number for other errors. [Angelo Salese]

-jangou_blitter.cpp: Rewrote blitter setters. [Angelo Salese]

-nightgal.cpp improvements: [Angelo Salese]
 * Fixed Night Gal Summer GFX ROM out-of-bounds accesses.
 * Added preliminary protection emulation for Night Gal Summer.

-luaengine: Added debugger_manager support. [Carl]

-plugins/cheat: Catch errors in cheat scripts, added preliminary breakpoint/watchpoint support. [Carl]

-plugins/gdbstub: Added WIP gdbstub plugins. [Carl]

-plugins/data: Added MARP scores. [Carl]

-a590: Corrected filenames and added undumped 4.6 and 5.92 versions. [Dirk Best]

-jvc_dsk: Autodetect double-sided floppy images without header (github issue #2405), improved support for headerless OS-9 images.
 [Dirk Best]

-Added Kontron PSI98 driver: [Dirk Best]
 * System is fully working with minor issues, you can boot KOS and CP/M 2.2 (images are in the software list).
 * Still missing is SASI and the ECB slot system with cards.
 * Added keyboard slot interface, created skeleton for keyboard, added HLE ASCII keyboard as default.
 * Added software list.

-upd765 improvements: [Dirk Best]
 * Don't instantly finish the RECALIBRATE command (fixes accessing second drive on psi98).
 * Made SEEK also take some time (fixes KOS FORMAT command on psi98).

-Added Nintendo GameCube skeleton driver: [Dirk Best]
 * Decrypts the IPL and the CPU executes the first few instructions.

-gyruss - various small updates: [Dirk Best, Tele-Viper]
 * Added missing DIP location for DSW3.
 * Fixed dip switches and added correct ROM labels/locations for gyrussce.
 * Fixed labels for gyrussb.
 * Updated diagnostic ROM info.
 * Adjusted some memory region sizes.
 * Removed unused DRIVER_INIT.

-igs011.cpp update: [Luca Elia]
 * Decrypted vbowlhk and added its own bitswaps for IGS003 and IGS011.
 * Found DIP switches to perform a protection test in vbowl, changed IGS012 mode toggling to pass the test.
 * Changed IGS003 command 48 in lhb2 and vbowl to potentially work in more cases (based on lhb2 tables).

-jockeyc: Added layout with keyboards. [Luca Elia]
 * Cleaned up inputs, added own DIP switches.
 * Corrected RTC, emulated hoppers.
 * Hooked up outputs, NVRAM, and trackball (for hidden editor).

-Overhauled internal UI: [Vas Crabb]
 * Use proper font metrics and handle space glyphs with null bounding box on OS X.
 * Patched GNU xgettext to support C++14 parsing so localisations can be updated.
 * Restored ability to localise info box headings.
 * Fixed info box navigation when system selection menu doesn't have focus.
 * Fixed keyboard navigation of software filter box, added support for home/end to jump to beginning/end of filter list.
 * Removed hacks in selector menu tying it to implementation details of other menus.
 * Improved encapsulation and reduced code duplication in system/software selection menus.
 * Fixed text alignment/gutters in filter list, info box and DAT view.
 * Eliminated use of hairline spaces for alignment in the info box.
 * Added indication for presence of analog controls and keyboard inputs in info box.
 * Added support for mouse wheel scroll in info box.
 * Allowed some character input events to be coalesced (reduces lag in live search with long lists).
 * Fixed software art/info display when keyboard focus leaves software selection list.
 * Save/restore images/info selection in right panel.
 * Fixed bugs and improved performance of code for detecting systems without ROMs.
 * Made audit menu request confirmation, show progress, and save result in INI format.
 * Consolidated code for drawing "extra" boxes above/below menus.
 * Fixed minimum/maximum for UI font rows per screen setting.
 * Fixed spacing on directory configuration menu.
 * Made slot options menu show full name of selected slot device below menu.

-Reimplemented system/software filters: [Vas Crabb]
 * Uniform interface/polymorphic implementation - eliminates almost all special-casing in menus.
 * Made filter names localisable.
 * Allowed more filter types and prevent contradictory filters from being added in custom filters.
 * Made category filter work like other filters (allowed in custom filter displays its own UI, better error messages).
 * Made multiple year/manufacturer/category/etc. filters in custom filter an inclusive union operator.
 * Removed implicit "Not BIOS" system filter, it can be added explicitly if desired.

-Moved unimplemented/imperfect flags from machines into devices: [Vas Crabb]
 * Allows dynamic warning flags depending on slot configuration.
 * Unclutters GAME/CONS/COMP/etc. definitions where a family of machines or a device have the same flags.
 * Allows more combinations of flags.

-PNG/rendering/artwork/output improvements: [Vas Crabb]
 * Added support for layout item groups that can be reused in other groups or views.
 * Reduced weight of render.h by moving component specialisation declarations into rendlay.cpp.
 * Replaced simple_list with more appropriate containers, remove misleading const qualifiers, reduced repeated XML walking.
 * Added N-dimensional output finder to avoid runtime string hashes - more than doubles performance of intlc440.
 * Unified code for copying PNG data into MAME bitmap in MAME and and pngcmp, made it less likely to leak memory.
 * Added support for Adam7 interleave in PNG files, fixed some corner cases in unfiltering code.
 * Fixed upsampling of greyscale PNGs, added support for monochrome with alpha.
 * Added support for 16-bit samples in PNG files.
 * Added support for PNG greyscale/RGB with transparent pen.
 * Detect more invalid PNG files rather than just behaving badly.

-Added "minimaws" scripts, a reference -listxml consumer (implemented with Python/WSGI and JavaScript): [Vas Crabb]
 * Provides verbs for loading data, some basic batch queries, and an interactive web server mode.
 * Serves linked HTML pages for machines, devices, and source files.
 * Demonstrates how to dynamically discover slot/BIOS options from static -listxml output.
 * Allows user to build a slot configuration and shows necessary command-line arguments or INI lines to produce it in MAME.
 * As a side effect, this provides additional validation of -listxml output, several issues and limitations were addressed.

-Fixed -sleep and -refreshspeed options, fixed a stupid forced unnecessary sleep. [Vas Crabb]

-Fixed -slot card,bios=rev (selected BIOS was being applied to slot itself, not card). [Vas Crabb]

-Fixed up input merger: added more variants, synchronisation and save state support, removed dubious reset behaviour. [Vas Crabb]

-Removed a whole lot of I64 from format strings (use logerror/string_format/stream_format to avoid it). [Vas Crabb]

-Added validation of BIOS names/descriptions/defaults and fixed errors exposed. [Vas Crabb]

-Moved additional content for release archive from build repository to main repository. [Vas Crabb]

-bublbobl.cpp, missb2.cpp: Reimplemented sound CPU semaphores and sound NMI according to schematics. [Lord Nightmare, Vas Crabb]
 * Implemented sound semaphores into tokio as well, fixing SOUND ERROR in test mode.
 * Added notes about sound CPU addressing.
 * Reimplemented /SRESET as a separate function called on sound CPU reset according to schematics.
 * Added correct watchdog to Bubble Bobble and Tokio, and disabled it on the Bubble Bobble prototype.
 * Added proper 'wired-or' sound CPU IRQs to Bubble Bobble.
 * Renamed 'slave' cpu to 'subcpu' to match schematics.

-fmtowns improvements: [Barry Rodewald]
 * Added support vertical zoom greater than x2 (fixes Evolution).
 * Improved graphic layer placement - games with different-sized layers now display better.
 * Added preliminary RS232C port support.

-gt64xxx: Buffer multiple writes for PCI stall (fixes MT06636). [Ted Green]

-seattle: Set proper blitz99 DIP switch settings and added gearshift to calspeed (fixes MT00975). [Ted Green]

-namcos2.cpp: Ordyne uses older IO MCU ROM, cleaned ROM labels as per PCB photos. [MetalliC]

-gaelco3d.cpp updates: [MetalliC]
 * Increased TMS ROM region, makes Football Power players models visible.
 * Fixed serial eeprom access.
 * Implemented Football Power mechanic ball simulation.

-Added Atomiswave security notes. [brizzo, MetalliC]

-apple2: Update screen on mode-switch only if really switching. [Peter Ferrie]

-ms0515: Add sound and corrected clock rate. [shattered]

-dvk_ksm: Implemented Baud rate generator and cleaned up source. [shattered]

-mos6526.cpp: Show state of registers that can be read without side effects in debugger. [David Viens]

-om6502.lst: Corrected cycle counts for undocumented $BF instruction. [David Viens]
 * Now passes Lorenz testsuite-2.15's cputiming.prg (and does not break laxay.prg).

-Added better documentation and part numbers for midvunit wheel board. [Risugami]

-Rainbow-100: Use Z80SIO instead of Z80DART, make UCSD Pascal boot again. [Bavarese]

-Added Control ID X628 fingerprint reader skeleton driver and NT7534 bitmap LCD controller device. [Felipe Sanches]

-triforce.cpp: Redumped Virtua Striker 4 Ver.2006 (GDT-0020D). [rtw]

-dccons.cpp: Added better dump of PAL Dreamcast Flash ROM. [rtw]

-snes.xml documentation updates: [Inigo Martinez]
 * Fixed ROM name and added extra information for Dragon Ball Z - Super Gokuu Den - Kakusei Hen.
 * Added information about an earlier Euro Ranma 1/2 revision.
 * Added information about an earlier Spanish release of Donkey Kong Country 2 - Diddy's Kong Quest.
 * Added information about the Spanish release of Pilotwings to the Euro dump.

-nes.xml documentation updates: [Inigo Martinez]
 * Added information about Super Mario Bros. PCB.
 * Fixed serial values and added PCB information for Pinball, Super Mario Bros. 2, and Trog!.

-gb.cpp: optimize the channel update methods. [057a3dd61f99517a3afea0051a49cb27994f94d]
 * I recently noticed that it takes very long to load a gba state, sometimes dozens of seconds, and the older the state is, the
    longer it takes to load.
 * I found out it's caused by gameboy_sound_device does not save the m_last_updated variable, and after loading a state, in the
    update_state method, now could end up being much larger than m_last_updated, and leads to substantial yet wasted calculation of
    the channel state.
 * Simply adding save_item(NAME(m_last_updated)) should fix the problem, however, since it will break current existing saved states,
    and optimize the channel update methods is in the TODO list, I took the latter choice, now the calculation to update the channel
    state is really negligible and the state loading is almost instantaneous.

-gb.cpp: save m_last_updated and m_snd_control.cycles [057a3dd61f99517a3afea0051a49cb27994f94d]
 * These two variables are added later but not saved, however, since they are used in the update_state method to control how many
    cycles to feed to the channel update methods, they should be saved to ensure correct emulation.

-Road Runner (Midway): replaced bad rom with good one, added notes [rogerxy, blinddog]

-Imgtool:  Changed a pointer to a reference, and fixed a std::string(nullptr) bug [Nathan Woods]

-Imgtool: Proper cleanup of floppy object after create/open failure [Nathan Woods]

-New 74LS259/9334/CD4099 devices [AJR]
 * These humble 16-pin logic devices were commonly used in 8-bit arcade games to control coin counters/lockouts, IRQ flipflops,
    graphics banking, slave CPU reset lines, discrete audio triggers, screen flipping, serial EEPROMs and much else. Over 100
    drivers and a few bus devices have been updated to use the new implementation, and a great deal of research has gone into
    documenting the physical location of these devices on actual PCBs in the source. Write handlers have been provided for both
    orthodox and somewhat less conventional memory mappings.
 * Incidental to this update, coin counters and/or lockouts have been added to Atari System 1 games, Basketball, Gauntlet, Gyruss,
    Hana Yayoi, Hole Land, Jr. Pac-Man, Mahjong Sisters, Pooyan, Roc'n Rope, Squash, Thunder Hoop, Time Limit, Time Pilot '84 and
    many others. This also cleans up coin counter behavior in Sauro and Rally Bike.

-segae.cpp: Corrected rom names for Transformers System E. [Fabrice Arzeno]

-changed set names for 'grtesoro' sets to 'play2000' to more accurately represent the name of the game gave it it's own machine
 structure and memory map instead of borrowing Maniac Square one added some workarounds so that it actually boots, it might not be
 heavily protected compared to the Gaelco titles and there doesn't seem much chance of us finding a working one. fixed GFX rom
 loading for the game based on above work. [David Haywood]

-ym2151: Emulate reset line [AJR]

-multipcm: confirmed as Yamaha YMW-258-F. [any, R. Belmont]

-spcforce: Add coin counters, start lamps and addressable latch device [AJR]

-tankbatt: Improved handling of sample triggers (fire sound is no longer doubled) [AJR]

-decocass.cpp: Major improvements to colors and graphics layer priorities [AJR]
 * Implement the PRI2 pen modification effect. This makes the tunnels and headlight in Highway Chase look much more accurate, and
    makes some color changes work in Astro Fantasia.
 * Shadow color in Skater is now properly black (not a pen modification effect).
 * Correct background fill color, making high score screen in Super Doubles Tennis properly blue.

-Imgtool:  Merged normalize_filename() into cannonicalize_path(), C++-ification (#2527) [Nathan Woods]

-Imgtool:  Eliminated Imgtool-specific rand() function [Nathan Woods]

-mario: Add coin counters and 74LS259 [AJR]

-isbc8630: Add 74LS259 "status register" (only partly implemented) [AJR]

-add  HD647180X MCU dumps to Whoopee and Ghox, allowing for sound emulation in both of them. This also fixes the high score table
 background in Ghox, which was also MCU related [Team Caps0ff]

-blazeon, wingforc: Shadowing RAM with ROM in sound CPU map can't be right [AJR]

-v25: Make IDB register state visible to debugger [AJR]

-SAM6883: Fixed a bug by which VDG addressing incorrectly honored the page bit [Nathan Woods]
 * This affected the CoCo/Dragon family of drivers
 * Special thanks to Ciaran Anscomb for identifying this problem

-[Imgtool] C++-ification of imgtool_forkent structure [Nathan Woods]

-jp.cpp: Add 74LS259 latches and ADPCM sound system used by some games [AJR]

-Imgtool:  Fixed features.supports_geticoninfo [Nathan Woods]

-Imgtool:  Classic Mac:  Made the logic for B&W icon able to handled non-masked set pixels [Nathan Woods]

-misc housekeeping / one-liners [David Haywood]
 * removed am already dumped game from the undumped list in balsente.cpp
 * change copy+pasted comment in hangzo to better reflect that the tiles are not encrypted
 * fixed typo in ghox memory map

-Refactor server_{ws,http}.hpp into separate interface and implementation. (#2548) [Christian Brunschen]
 * Refactor server_{ws,http}.hpp into separate interface and implementation headers. When shutting down the HTTP server, also
    explicitly stop the asio::io_context.

-ceci: Add QUIT and TEST keys (hold down TEST while resetting for diagnostic) [R. Belmont]

-ceci: complete keyboard, fix banking so Chinese mode doesn't crash [R. Belmont]

-ceci: Cleanup, fixed several banking errors, Chinese mode works now [R. Belmont]

-janptr96: Change CPU type to TMPZ84C015 and drive interrupts through internal CTC [AJR]

-ceci: Fixed spacebar bug that made it impossible to type BASIC programs, fixed C300 banking, added HGR color killer softswitch.
 [R. Belmont]

-didact: Updated LOG support to latest cut [Joakim Larsson Edstrom]

-Adding #include <cctype> [Nathan Woods]

-alphatro: added cart slot and hook for cartridge software list. [R. Belmont]

-changela: Change default DIP setting to keep coin counters separate [AJR]

-mjelctrn, mjembase, majxtal7, neruton: Change CPU type to TMPZ84C015 and improve interrupt handling [AJR]

-dynax.cpp: Use address map bank device for most games in this driver (plus htengoku). Many of these games will now successfully
 retrieve the local time at the start through an RTC device previously treated as read-only. [AJR]

-alphatro: support 8K carts from the command line + add cart software list [R. Belmont]

-fixeight: EEPROM fixes [AJR]
 * Correct the decryption of some V25 opcodes used in the EEPROM service routine
 * Remove the ugly routine that hardcoded a region for each set
 * Add and document a secret input that rewrites the EEPROM for any region

-Delay data capture timing for MSM5205 and MSM6585 (should help with synchronization later) [AJR]

-Fix to MameTesters bug #6657 (#2560) [Nathan Woods]
 * The source of the issue is that the logic for rotating slot options was broken.  It would count selectable options and skip over
    options that were not selectable, except for the specific scenario where the index was zero.  I ended up largely replacing the
    logic to be more C++-ish.

-fmtowns_cd.xml: add several entries, update undumped list [r09]
 * Added software list entries from various sources:
 * Nihon Mukashibanashi, The Queen of Duellist Gaiden Alpha Light [yukin / Tokugawa Corporate Forums]
 * DOR Special Edition '93 (alt), Gokko Vol. 03 - Etcetera [redump.org]
 * Europa Sensen, Nobunaga no Yabou - Bushou Fuunroku, Inindou - Datou Nobunaga [Reuental]
 * Also, updated the undumped list and merged the Towns and Marty list, since there is no real distinction between them. Some games
    are Marty-compatible, but only some of them were advertised as such, and there are no Marty-only games.

-fmtowns_flop.xml: add several entries [r09]
 * Added Illusion City and Ving Software Collection, both from yukin (Tokugawa Corporate Forums).

-new machines promoted to WORKING - TH Strikes Back [David Haywood, Kevin Eshbach]
 * note, if you have old nvram file delete it or you won't see any improvement.

-irem_cpu.cpp: add some infos about the Superior Soldiers sound CPU [caius]

-mario.cpp: identified marioj as Revision C [Corrado Tomaselli]

-hp9845: re-factored handling of HTI images into a dedicated format module [fulivi]

-hp9845: re-factored hp9845_tape module of imgtool to use HTI format [fulivi]

-hp85: implemented tape drive [fulivi]

-add basic device for saturn_cdb to load the roms. [David Haywood]

-hiscore.dat: Updates [Leezer]

-New working clone - WWF Superstars US rev 6 (and renamed sets to make more sense), New working clone - 1943 Japan original.  I have
 a pristine original 1943 Japan - when comparing BM01 to the existing MAME BM01 it's clear the existing set has been hacked to
 remove protection.  Renamed that set appropriately. [Bryan McPhail]

-alphatro: added BIOS set for machine w/Bicom graphics [Team Europe, rfka01, R. Belmont]

-unkfr belongs in 4enraya (which was my guess when it was mentioned) (#2572) [David Haywood]
 * unkfr belongs in 4enraya (which was my guess when it was mentioned) doesn't seem much point in having a complete non-working
    driver in the source for it when it boots as a romswap.

-dectalk.cpp: fixed firmware 1.8 to use different dsp rom from firmware 2.0, and some driver cleanup [Lord Nightmare]

-m68340: Added implementations for VCO clock synthesizer and Timer module Counters, IRQ:s and one operational mode
 [Joakim Larsson Edstrom]

-flstory: Fix CPU communication issue that sometimes caused sound to disappear entirely [AJR]

-Fixed MameTesters bug #6621 [Nathan Woods]

-aristmk5 updates (from Heihachi_73) fixes some sets, adds honeypot and venicea5 [David Haywood]

-alphatro_flop: replace bad dumps for CP/M and BASIC with good ones. [R. Belmont]

-decomult: Replace gross hack for banking "dongle" with something likelier [AJR]

-Adding Alex Kidd in Miracle World 2 (#2566) [Shideravan]
 * Fan made release, which runs in original system and was also released and (limited) distributed as a physical copy. More info:
    https://youtu.be/6ntwR94J6iM https://goo.gl/9efrGv

-chinhero: Add coin counters [AJR]

-salamand: Improve VLM5030 control [AJR]

-combatscb: Hook up a second MSM5205 and improve interrupt handling [AJR]

-combatscb: On closer examination, there's only one MSM5205 after all [AJR]

-mb8421: Create 16-bit expanded variant and add it to thndzone/dassault [AJR]

-mastninj: Implement dual OPN + dual MSM5205 ADPCM sound system as in Automat [AJR]

-Modification for Android build (NDK r14b, build-tools 21.1.2 and gradle 2.2.1) (#2585) [Miso Kim]

-hp85: fixed a bug in tape gap detection [fulivi]

-new WORKING clones  Alligator Hunt (unprotected, set 2) [David Haywood, Peter Wilhelmsen]
 * this was purchased as part of the quest to find a 2nd working Alligator Hunt still using the DS5002FP rather than the unprotected
    code, took a gamble on it because it was an unknown set, turns out it's unprotected but very different to the set in MAME.
 * also unrelated but marked unkfr as working since I can't find an issue with it

-mitchell.cpp: added pals and eeprom dumps to pkladiesla, also corrected rom labels [f205v]

-thoop2.cpp: Added PCB layout for TH Strikes Back [Brian Troha]

-k2000: added sample ROMs [R. Belmont, anonymous]

-floppy: Added FLOPPY_HFE_FORMAT to default_floppy_formats. [Nigel Barnes]

-imgtool: hopefully fixed the "GET" command [fulivi]

-Rewrite mmodular.cpp to use the new mmboard device. [Sandro Ronco]

-acorn_dsk: Added OPUS_DDCPM_FORMAT [Nigel Barnes]
 * Removed ACORN_CPM_FORMAT, same geometry as ACORN_SSD_FORMAT/ACORN_DSD_FORMAT.
 * Improved find_size/identify for SSD/DSD formats.
 * ACORN_DOS_FORMAT 640K now handled as ACORN_ADFS_OLD_FORMAT.
 * Fixed geometry for ACORN_DOS_FORMAT 800K.

-wd177x_dsk: Apply sector_count and gaps to track description. [Nigel Barnes]

-tube: New TUBE device. Acorn Tube ULA for use in Acorn 2nd Processors [Nigel Barnes]

-bbc: Added various 2nd processors as Tube slot devices: [Nigel Barnes]
 * Acorn 6502 2nd Processor, Acorn 65C102 Co-Processor, Acorn Z80 2nd Processor, Acorn 80186 Co-Processor,
   Casper 68000 2nd Processor

-bbc: BeebSID slot device for the 1MHz bus. [Nigel Barnes]

-bbc: Minor video improvements [Nigel Barnes]
 * Fixed cursor size.
 * Double clock in MODE7 to counteract non-implemented interlace.

-bbc_acorn8271: Added Amcom DFS A7874. [Nigel Barnes]

-bbc_opus8272: New Opus 8272 FDC device with DDOS 3.00, not yet working. [Nigel Barnes]

-new machine NOT WORKING : Kick Ball [Darksoft, Sean Sutton, Surgeville, Smitdogg, The Dumping Union] (#2595) [David Haywood]
 * new machine NOT WORKING : Kick Ball [Darksoft, Sean Sutton, Surgeville, Smitdogg, The Dumping Union] hardware is definitely
    bootleg / cloned power spikes, fonts etc. are video system, and the code I think is hacked up Power Spikes too. sprite system /
    tilemaps etc. are modified tho so needs work.

-imgtool: a fix for the "GET" command bug Hi, this PR is for my attempt at fixing the bug in imgtool I mentioned here:
 http://forums.bannister.org//ubbthreads.php?ubb=showflat&Number=110649 [fulivi]
 * I'm not a super-expert in imgtool sources, so I'd like very much if N.Woods could give a look and "validate" my fix. Thanks.
 * -F.Ulivi

-Fixed a bug in gap detection of DC100 tape emulation Hi, this PR is for a small fix to DC100 cassette emulation (used in HP 9845 &
 85 systems) to prevent false gap detections (which, in turn, prevent reading of tape). Thanks. [fulivi]
 * -F.Ulivi

-Modification for Android build (NDK r14b, build-tools 21.1.2 and gradle 2.2.1) # Preparation for Android build [meesokim]
 * NDK-14b: https://developer.android.com/ndk/downloads/older_releases.html#ndk-14b-downloads SDK: command line tools
    https://developer.android.com/studio/index.html#downloads build-tools: 21.1.2 by using sdkmamager in the Android SDK. JDK:
    jdk1.8.0_144
 * *The following environmental variables required (examples for your understanding).** ``` export ANDROID_HOME=/opt/android export
    ANDROID_NDK_ROOT=/opt/android-ndk-r14b export
    ANDROID_NDK_ARM=$ANDROID_NDK_ROOT/toolchains/arm-linux-androideabi-4.9/prebuilt/windows export
    ANDROID_NDK_ARM64=$ANDROID_NDK_ROOT/toolchains/aarch64-linux-android-4.9/prebuilt/windows-x86_64 export
    ANDROID_NDK_LLVM=$ANDROID_NDK_ROOT/toolchains/llvm/prebuilt/windows export ANDROID_NDK_HOME=$ANDROID_NDK_ROOT export
    JAVA_HOME=/opt/jdk1.8.0_144 ```
 * # Step by Step for Android build
 * *- build command for libSDL2.so and libmain.so** `$ make android-arm` for 32bit `$ make android-arm64` for 64bit
 * *- copy some rom files into the following directory for initial work** android-project/app/src/main/assets/roms
 * *- build command for android apk by using gradle** `$ android-project/gradlew -p android-project assembleDebug`
 * *- Installation of final output by using adb** `$ adb install -r android-project/app/build/outputs/apk/app-debug.apk`
 * *- additional roms path in your android phone/tablet** /Android/data/org.mamedev.mame/roms /sdcard/Download /mame/roms
 * *Known issues**
   - Mouse doesn't work properly. It works fine by a USB or a bluetooth keyboard.
   - Joypad doesn't work properly.
   - Keyboard doesn't work if it has plugged during MAME running.
   - autoframeskip or 8 frameskip is required for proper working.

-m68340: Added implementations for VCO clock synthesizer and Timer module Counters, IRQ:s and one operational mode. I intend to add
 the serial module and also refactor the modules as devices, moving the whole implementation from machine to cpu/68000 similar to
 the h8 derivates. But that will not be the next thing I do so feel free to review and merge this now, there are a number of other
 drivers that awaits more 68340 functionality apart from the dbox driver I am working on. [Joakim Larsson Edstrom]

-aristmk5 updates (from Heihachi_73) fixes some sets, adds honeypot and venicea5 [David Haywood]

-Fixed MameTesters bug #6621 [Nathan Woods]

-unkfr belongs in 4enraya (which was my guess when it was mentioned) doesn't seem much point in having a complete non-working driver
 in the source for it when it boots as a romswap. [David Haywood]

-add basic device for saturn_cdb to load the roms seems to make more sense than just sitting on the ROMs, which as far as I can tell
 benefits absolutely nobody... [David Haywood]

-Emulation of HP85 tape drive Hi, [fulivi]
 * this set of commits adds the emulation of HP85 tape drive. This computer had a HP custom chip (whose part number was 1MA6-0001)
    as tape controller. In order to add the 1MA6 emulation, I first separated the support for the HTI tape format into a proper
    module under "lib/formats". Support for this format was previously embedded into TACO driver (tape controller of HP9845) and the
    related imgtool module. It is now independent of any hw driver or support tool.
 * Thanks.
 * -F.Ulivi

-Adding Alex Kidd in Miracle World 2 Fan made release, which runs in original system and was also released and (limited) distributed
 as a physical copy. More info: https://youtu.be/6ntwR94J6iM https://goo.gl/9efrGv [Shideravan]

-Added several entries to FM Towns softlists See commits for details. [rzero9]

-Fix to MameTesters bug #6657 The source of the issue is that the logic for rotating slot options was broken.  It would count
 selectable options and skip over options that were not selectable, except for the specific scenario where the index was zero.  I
 ended up largely replacing the logic to be more C++-ish. [Nathan Woods]
 * I also changed the options list to be std::map instead of std::unordered_map.  Rotating the latter is indeterminate.

-Adding #include <cctype> This seems to be necessary for MSVC to get std::tolower() [Nathan Woods]

-didact: Updated LOG support to latest cut [Joakim Larsson Edstrom]

-Refactor server_{ws,http}.hpp into separate interface and implementation. Refactor server_{ws,http}.hpp into separate interface and
 implementation files. [cbrunschen]
 * Use std::weak_ptr from websocket_connection_impl to webpp::Connection to avoid reference cycles.
 * When shutting down the HTTP server, also explicitly stop the asio::io_context; this allows the built binary to exit cleanly.

-misc housekeeping / one-liners [David Haywood]
 * removed am already dumped game from the undumped list in balsente.cpp
 * change copy+pasted comment in hangzo to better reflect that the tiles are not encrypted
 * fixed typo in ghox memory map

-Imgtool:  Classic Mac:  Made the logic for B&W icon able to handled non-masked set pixels [Nathan Woods]

-Imgtool:  Fixed features.supports_geticoninfo [Nathan Woods]

-SAM6883: Fixed a bug by which VDG addressing incorrectly honored the page bit This affected the CoCo/Dragon family of drivers
 [Nathan Woods]
 * Special thanks to Ciaran Anscomb for identifying this problem

-add HD647180X MCU dumps to Whoopee and Ghox [Team Caps0ff] This adds  HD647180X MCU dumps to Whoopee and Ghox, allowing for sound
 emulation in both of them. It also fixes the high score table background in Ghox, which was also MCU related [Team Caps0ff]

-[Imgtool] C++-ification of imgtool_forkent structure [Nathan Woods]

-Imgtool:  Eliminated Imgtool-specific rand() function [Nathan Woods]

-Imgtool:  Merged normalize_filename() into cannonicalize_path(), C++-ification [Nathan Woods]

-revert the speed fix in Galaxia/Astro Wars that caused all sets to sound wrong The present S2636 core has been rewritten more than
 a year ago by Vas to adapt the tone frequency from the refresh rate, and this made me realize that my speed fixes for galaxia.cpp
 were incorrect. [kazblox]

-changed set names for 'grtesoro' sets to 'play2000' to more accurately represent the name of the game [David Haywood]
 * gave it it's own machine structure and memory map instead of borrowing Maniac Square one added some workarounds so that it
    actually boots, it might not be heavily protected compared to the Gaelco titles and there doesn't seem much chance of us finding
    a working one. fixed GFX rom loading for the game based on above work.

-gb.cpp: optimize the channel update methods. I recently noticed that it takes very long to load a gba state, sometimes dozens of
 seconds, and the older the state is, the longer it takes to load. [057a3dd61f99517a3afea0051a49cb27994f94d]
 * I found out it's caused by gameboy_sound_device does not save the m_last_updated variable, and after loading a state, in the
    update_state method, now could end up being much larger than m_last_updated, and leads to substantial yet wasted calculation of
    the channel state.
 * Simply adding save_item(NAME(m_last_updated)) should fix the problem, however, since it will break current existing saved states,
    and optimize the channel update methods is in the TODO list, I took the latter choice, now the calculation to update the channel
    state is really negligible and the state loading is almost instantaneous.


New working machines
--------------------
lynx: Crystal Mines II - Buried Treasure (Euro, USA) [anonymous]
apple2: Nightmare Gallery [Ian B.]
Anpanman Pico Wakuwaku Pan Koujou (Jpn) [Team Europe, The Dumping Union]
Ett År med Nalle Puh (Swe) [Team Europe, The Dumping Union]
Mephisto Polgar 10MHz [Sandro Ronco]


New working clones
------------------
this has been sitting around for about 7 years, so no idea about the credit. [David Haywood]
this was purchased as part of the quest to find a 2nd working Alligator Hunt still using the DS5002FP rather than the unprotected
  code, took a gamble on it because it was an unknown set, turns out it's unprotected but very different to the set in MAME.
 [David Haywood]
also unrelated but marked unkfr as working since I can't find an issue with it [David Haywood]
this has been sitting around for about 7 years, so no idea about the credit. [David Haywood]


Machines promoted to working
----------------------------
dumped using the method developed by Morten Shearman Kirkegaard and Peter Wilhelmsen [David Haywood]
note, if you have old nvram file delete it or you won't see any improvement. [David Haywood]


New machines marked as NOT_WORKING
----------------------------------
Monomachine MK2 [R. Belmont, tbd]
Machinedrum MK2 [R. Belmont, tbd]
Access Virus A [R. Belmont, tbd]
Access Virus B (Ver. T) [R. Belmont, tbd]
Access Virus C [R. Belmont, tbd]
Access Virus Rack [R. Belmont, tbd]
Access Virus Rack XL [R. Belmont, tbd]
Access Virus Classic [R. Belmont, tbd]
Kurzweil K2000 [David Ryskalczyk, R. Belmont]
Unknown French encrypted game [Roberto Fresca, Arzeno Fabrice]
Lejonkungen Äventyr (Swe) [Team Europe, The Dumping Union]
Mephisto RISC II [Sandro Ronco]
Magic Reel [TeamEurope]
Super Game (Sega Master System Multi-game bootleg) (alt games) [TeamEurope]



Comparing 0.188 (mame0188) to 0.188 (mame0188-650-gec3caa9)

Renames
grtesoro -> play2000a Play 2000 (Super Slot & Gran Tesoro) (v5.01) (Italy)
cawingu -> cawingur1 Carrier Air Wing (USA 901012)
ordyne -> ordyneje Ordyne (Japan, English Version)
brapboysu -> brapboyspu B.Rap Boys Special (US)
brapboysj -> brapboyspj B.Rap Boys Special (Japan)
vendettaj -> vendetta2pp Crime Fighters 2 (Japan, 2 Players, ver. P)
vendetta2p -> vendetta2pw Vendetta (World, 2 Players, ver. W)
grtesoro4 -> play2000 Play 2000 (Super Slot & Gran Tesoro) (v4.0) (Italy)
fscc12 -> fscc12b Sensory Chess Challenger 12-B
vf4evo -> vf4evob Virtua Fighter 4 Evolution (Version B) (Japan) (GDS-0024B)

New working machines
--------------------
DoDonPachi III (World, 2002.05.15 Master Ver)
unknown 'Space Invaders' gambling game

New working clones
------------------
1943: Midway Kaisen (Japan, no protection hack)
Alligator Hunt (unprotected, set 2)
Crazy Climber (US set 2)
Mephisto Nigel Short
Mephisto Polgar 10MHz
Mephisto Portorose 68000
Mephisto Portorose 68020
WWF Superstars (US revision 4)
WWF Superstars (US revision 6)
WWF Superstars (US revision 7)

Machines promoted to working
----------------------------
Mephisto Academy
Mephisto Almeria 68000
Mephisto Almeria 68020
Mephisto Berlin Pro 68020
Mephisto Genius 68030
Mephisto Polgar
TH Strikes Back

Clones promoted to working
--------------------------
Mephisto Berlin Pro London Upgrade
Mephisto Genius 68030 London Upgrade
Mephisto London 68020
Mephisto Lyon 68000
Mephisto Lyon 68020
Mephisto Vancouver 68000
Mephisto Vancouver 68020

New machines marked as NOT_WORKING
----------------------------------
GameCube (Japan)
Honey Pot (03J00241, NSW/ACT)
K2000
Kick Ball
Machinedrum SPS-1 MK2
Magic Reels
Monomachine SFX6 MK2
Super Game (Sega Master System Multi-game bootleg) (alt games)
Venice (02J02056, Venezuela)
Virus A
Virus B (Ver. T)
Virus C
Virus Classic
Virus Rack (Ver. T)
Virus Rack XL

New clones marked as NOT_WORKING
--------------------------------
GameCube (Brazil)
GameCube (EUR)
GameCube (USA)
Mephisto RISC II
Print Club (World)
